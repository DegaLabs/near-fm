{"version":3,"sources":["App.js","pages/Home.js","images/near_vodka_logo.png","pages/Post.js","index.js","components/Followers.js","components/FollowButton.js","components/AccountCard.js","components/Feed.js","components/Account.js","components/NewPost.js","data/Post.js","components/AddStorageButton.js","components/Post.js","data/Account.js","pages/Discover.js","components/FollowTab.js","pages/Account.js"],"names":["NearConfig","window","location","hostname","networkId","nodeUrl","archivalNodeUrl","contractName","walletUrl","App","props","_near","blockViewCall","blockId","methodName","args","account","validateArgs","connection","lastBlockHeight","archivalConnection","provider","query","request_type","block_id","account_id","method_name","args_base64","Buffer","JSON","stringify","toString","result","length","parse","from","state","connected","isNavCollapsed","newPosts","followers","following","_initNear","then","setState","signedIn","accountId","signedAccountId","a","keyStore","nearAPI","BrowserLocalStorageKeyStore","Object","assign","deps","near","this","fromConfig","type","url","signer","walletConnection","getAccountId","block","finality","header","height","contract","viewMethods","changeMethods","storage_minimum_balance","storageMinimumBalance","accounts","getAccount","Promise","resolve","AccountData","load","cacheAccount","posts","getPost","blockHeight","key","PostData","accountData","fetchStorageBalance","fetchFollowings","followings","enoughStorageBalance","stats","fetchFollowers","e","preventDefault","requestSignIn","signOut","_accountId","passProps","updateState","s","className","onClick","logOut","role","aria-hidden","basename","process","to","title","src","NearVodkaLogo","alt","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","aria-current","href","data-ribbon","exact","path","React","Component","HomePage","useState","followingSeed","setFollowingSeed","useEffect","seed","entries","map","lastPostHeight","push","extraPosts","module","exports","PostPage","useParams","post","setPost","parseInt","ReactDOM","render","document","getElementById","Followers","keys","filter","FollowButton","alert","follow","unfollow","disabled","AccountCard","setAccount","knownFollowers","setKnownFollowers","newFollowing","setNewFollowing","loading","setLoading","followsYou","setFollowsYou","uuid","hidden","fetchAccount","useCallback","slice","i","followersAndOthers","followingAndOthers","numPosts","numFollowing","numFollowers","Feed","setPosts","gkey","fetchPosts","recent","SortedSet","pop","mounted","feed","Account","setHidden","data-tip","data-for","border","borderColor","delayHide","delayShow","effect","afterShow","afterHide","NewPost","body","setBody","_body","convertPost","placeholder","rows","value","onChange","target","time","Date","parseFloat","block_height","last_post_height","requestBlockHeight","_ready","fetch","AddStorageButton","storage_deposit","Post","datetime","MinEnoughStorageBalance","BN","convertAccountStats","accountStats","num_posts","num_followers","num_following","storage_balance_of","storageBalance","storageTotal","total","storageAvailable","available","get_account","followingsFetch","promises","get_following","from_index","limit","all","flat","forEach","followersFetch","get_followers","fetchAccountStats","DiscoverPage","setSeed","fetchSeed","get_num_accounts","numAccounts","get_accounts","Math","max","FollowTab","setFollow","showFollowers","list","notFollowing","AccountPage","suffix","aria-selected"],"mappings":"+UA2CMA,GAvBYC,OAAOC,SAASC,SASX,CACrBC,UAAW,UACXC,QAAS,+BACTC,gBAAiB,wCACjBC,aAAc,4BACdC,UAAW,oCAYPC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,CACLC,cADK,SACSC,EAASC,EAAYC,GAAO,IAAD,iIAC7CA,EAAOA,GAAQ,GACf,EAAKC,QAAQC,aAAaF,GACpBG,EAAaL,EApCE,OAoC+B,EAAKM,gBACvD,EAAKC,mBACL,EAAKJ,QAAQE,WAL8B,SAMxBA,EAAWG,SAASC,MAAM,CAC7CC,aAAc,gBACdC,SAAUX,EACVY,WAAYzB,EAAWO,aACvBmB,YAAaZ,EACba,YAAa,IAAIC,EAAOC,KAAKC,UAAUf,GAAO,QAAQgB,SAAS,YAXpB,cAMvCC,EANuC,yBAatCA,EAAOA,QAAUA,EAAOA,OAAOC,OAAS,GAAKJ,KAAKK,MAAMN,EAAOO,KAAKH,EAAOA,QAAQD,aAb7C,+CAiBjD,EAAKK,MAAQ,CACXC,WAAW,EACXC,gBAAgB,EAChBC,SAAU,GACVC,UAAW,GACXC,UAAW,IAGb,EAAKC,YAAYC,MAAK,WACpB,EAAKC,SAAS,CACZC,WAAY,EAAKlC,MAAMmC,UACvBC,gBAAiB,EAAKpC,MAAMmC,UAC5BT,WAAW,OAjCE,E,oFAuCnB,uCAAAW,EAAA,6DACQC,EAAW,IAAIC,YAAkBC,4BADzC,SAEqBD,UAAgBE,OAAOC,OAAO,CAACC,KAAM,CAACL,aAAYjD,IAFvE,cAEQuD,EAFR,OAGEC,KAAK7C,MAAMS,mBAAqB8B,aAAmBO,WAAW,CAC5DrD,UAAWJ,EAAWI,UACtBiB,SAAU,CAAEqC,KAAM,kBAAmB3C,KAAM,CAAE4C,IAAK3D,EAAWM,kBAC7DsD,OAAQ,CAAEF,KAAM,iBAAkBT,cAEpCO,KAAK7C,MAAMsC,SAAWA,EACtBO,KAAK7C,MAAM4C,KAAOA,EAElBC,KAAK7C,MAAMkD,iBAAmB,IAAIX,mBAAyBK,EAAMvD,EAAWO,cAC5EiD,KAAK7C,MAAMmC,UAAYU,KAAK7C,MAAMkD,iBAAiBC,eAEnDN,KAAK7C,MAAMK,QAAUwC,KAAK7C,MAAMkD,iBAAiB7C,UAdnD,UAesBwC,KAAK7C,MAAMK,QAAQE,WAAWG,SAAS0C,MAAM,CAAEC,SAAU,UAf/E,eAeQD,EAfR,OAgBEP,KAAK7C,MAAMQ,gBAAkB4C,EAAME,OAAOC,OAC1CV,KAAK7C,MAAMwD,SAAW,IAAIjB,WAAiBM,KAAK7C,MAAMK,QAAShB,EAAWO,aAAc,CACtF6D,YAAa,CAAC,cAAe,eAAgB,mBAAoB,gBAAiB,gBAAiB,WAAY,0BAA2B,sBAC1IC,cAAe,CAAC,kBAAmB,mBAAoB,OAAQ,SAAU,cAnB7E,UAqB2Cb,KAAK7C,MAAMwD,SAASG,0BArB/D,WAqBEd,KAAK7C,MAAM4D,sBArBb,OAuBEf,KAAK7C,MAAM6D,SAAW,GACtBhB,KAAK7C,MAAM8D,WAAa,SAAC3B,GACvB,OAAIA,KAAa,EAAKnC,MAAM6D,SACnB,EAAK7D,MAAM6D,SAAS1B,GAEtB,EAAKnC,MAAM6D,SAAS1B,GAAa4B,QAAQC,QAAQC,IAAYC,KAAK,EAAKlE,MAAOmC,KAGvFU,KAAK7C,MAAMmE,aAAe,SAAChC,EAAW9B,GAChC8B,KAAa,EAAKnC,MAAM6D,WAG5B,EAAK7D,MAAM6D,SAAS1B,GAAa4B,QAAQC,QAAQ3D,KAGnDwC,KAAK7C,MAAMoE,MAAQ,GACnBvB,KAAK7C,MAAMqE,QAAU,SAAClC,EAAWmC,GAC/B,IAAMC,EAAG,UAAMpC,EAAN,YAAmBmC,GAC5B,OAAIC,KAAO,EAAKvE,MAAMoE,MACb,EAAKpE,MAAMoE,MAAMG,GAEnB,EAAKvE,MAAMoE,MAAMG,GAAOR,QAAQC,QAAQQ,IAASN,KAAK,EAAKlE,MAAOmC,EAAWmC,MAGlFzB,KAAK7C,MAAMmC,UA/CjB,kCAgDmCU,KAAK7C,MAAM8D,WAAWjB,KAAK7C,MAAMmC,WAhDpE,eAgDIU,KAAK7C,MAAMyE,YAhDf,iBAiDU5B,KAAK7C,MAAMyE,YAAYC,sBAjDjC,yBAkDU7B,KAAK7C,MAAMyE,YAAYE,kBAlDjC,QAmDI9B,KAAKZ,SAAS,CACZ2C,WAAYnC,OAAOC,OAAO,GAAIG,KAAK7C,MAAMyE,YAAYG,YACrDC,qBAAsBhC,KAAK7C,MAAMyE,YAAYK,MAAMD,uBAErDhC,KAAK7C,MAAMyE,YAAYM,iBAAiB/C,MAAK,WAC3C,EAAKC,SAAS,CACZJ,UAAWY,OAAOC,OAAO,GAAI,EAAK1C,MAAMyE,YAAY5C,gBAzD5D,iD,wHAgEA,WAAoBmD,GAApB,SAAA3C,EAAA,6DACE2C,EAAEC,iBACe,aAFnB,SAGQpC,KAAK7C,MAAMkD,iBAAiBgC,cAChC7F,EAAWO,aAFI,cAFnB,iCAOS,GAPT,gD,kHAUA,sBAAAyC,EAAA,sDACEQ,KAAK7C,MAAMkD,iBAAiBiC,UAC5BtC,KAAK7C,MAAMmC,UAAY,KACvBU,KAAKZ,SAAS,CACZC,WAAYW,KAAKuC,WACjBhD,gBAAiBS,KAAKuC,aAL1B,gD,0EASA,WAAU,IAAD,OACDC,EAAS,aACbrF,MAAO6C,KAAK7C,MACZsF,YAAa,SAACC,GAAD,OAAO,EAAKtD,SAASsD,KAC/B1C,KAAKpB,OAEJ6B,EAAUT,KAAKpB,MAAMC,UAEtBmB,KAAKpB,MAAMS,SACd,6BACE,kBAAC,IAAqBmD,GACtB,4BACEG,UAAU,4BACVC,QAAS,kBAAM,EAAKC,WAFtB,aAE2C7C,KAAKpB,MAAMW,gBAFtD,MAKF,6BACE,4BACEoD,UAAU,kBACVC,QAAS,SAACT,GAAD,OAAO,EAAKE,cAAcF,KAFrC,6BAVF,8CAAmB,0BAAMQ,UAAU,+BAA+BG,KAAK,SAASC,cAAY,UAgB9F,OACE,yBAAKJ,UAAU,OACb,kBAAC,IAAD,CAAQK,SAAUC,IAChB,yBAAKN,UAAU,sDACb,yBAAKA,UAAU,mBACb,kBAAC,IAAD,CAAMA,UAAU,eAAeO,GAAG,IAAIC,MAAM,kCAC1C,yBAAKC,IAAKC,IAAeC,IAAI,aAAaX,UAAU,gCADtD,wBAIA,4BAAQA,UAAU,iBAAiBzC,KAAK,SAASqD,iBAAe,WACxDC,iBAAe,0BAA0BC,gBAAc,yBACvDC,gBAAc,QAAQC,aAAW,qBACvC,0BAAMhB,UAAU,yBAElB,yBAAKA,UAAU,2BAA2BiB,GAAG,0BAC3C,wBAAIjB,UAAU,mCACZ,wBAAIA,UAAU,YACZ,kBAAC,IAAD,CAAMA,UAAU,WAAWkB,eAAa,OAAOX,GAAG,KAAlD,SAEDlD,KAAKpB,MAAMS,UACV,wBAAIsD,UAAU,YACZ,kBAAC,IAAD,CAAMA,UAAU,WAAWkB,eAAa,OAAOX,GAAG,aAAlD,aAGHlD,KAAKpB,MAAMS,UACV,wBAAIsD,UAAU,YACZ,kBAAC,IAAD,CAAMA,UAAU,WAAWkB,eAAa,OAClCX,GAAE,aAAQlD,KAAKpB,MAAMW,kBAD3B,aAKN,0BAAMoD,UAAU,UACblC,MAMT,uBAAGkC,UAAU,wCAAwCmB,KAAK,+CAA+CC,cAAY,oBAClHZ,MAAM,qBADT,qBAGA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOa,OAAK,EAACC,KAAM,KAChBjE,KAAKpB,MAAMS,SACV,kBAAC,IAAamD,GAEd,kBAAC,IAAiBA,IAGtB,kBAAC,IAAD,CAAOwB,OAAK,EAACC,KAAM,aACjB,kBAAC,IAAiBzB,IAEpB,kBAAC,IAAD,CAAOwB,OAAK,EAACC,KAAM,iBACjB,kBAAC,IAAgBzB,IAEnB,kBAAC,IAAD,CAAOyB,KAAM,yBACX,kBAAC,IAAgBzB,IAEnB,kBAAC,IAAD,CAAOwB,OAAK,EAACC,KAAM,8BACjB,kBAAC,IAAazB,W,GA7MV0B,IAAMC,WAsNTlH,Q,4HCtMAmH,IAvDf,SAAkBlH,GAAQ,IAAD,EACmBmH,oBAAS,GAD5B,mBAChBC,EADgB,KACDC,EADC,KAoBvB,OAjBAC,qBAAU,WACR,GAAItH,EAAM2B,UAAW,CACnB,IAAM+C,EAAc1E,EAAMC,MAAMyE,YAChC,GAAIA,EAAa,CACf,IAAM6C,EAAO7E,OAAO8E,QAAQxH,EAAM6E,YAAY4C,KAC5C,mCAAErF,EAAF,WAA0B,CAA1B,KAAmC2C,MAAM2C,eAAgBtF,MAEvDsC,EAAYK,MAAM2C,eAAiB,GACrCH,EAAKI,KAAK,CAACjD,EAAYK,MAAM2C,eAAgBhD,EAAYtC,YAE3DiF,EAAiBE,QAEjBF,EAAiB,OAGpB,CAACrH,EAAM2B,UAAW3B,EAAM6E,WAAY7E,EAAMC,MAAMyE,cAGjD,6BACE,yBAAKe,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACb,kBAAC,IAAYzF,GACXoH,GAAiBA,EAAc7F,OAAS,EACxC,6BACE,yCACA,kBAAC,IAAD,iBAAUvB,EAAV,CAAiBuH,KAAMH,EAAeQ,WAAY5H,EAAM6B,aAExDuF,EACF,6BACE,6CACA,6BACE,kBAAC,IAAD,CAAMpB,GAAI,YAAaP,UAAU,6BAAjC,mBAIJ,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,iBAKR,yBAAKA,UAAU,gCACZzF,EAAMmC,UAAY,kBAAC,IAAcnC,S,oBCtD9C6H,EAAOC,QAAU,IAA0B,6C,mFCqC5BC,IAhCf,SAAkB/H,GAAQ,IAAD,EACYgI,cAA3B5F,EADe,EACfA,UAAWmC,EADI,EACJA,YADI,EAEC4C,oBAAS,GAFV,mBAEhBc,EAFgB,KAEVC,EAFU,KAUvB,OANIlI,EAAM2B,WAAa3B,EAAMC,OAC3BD,EAAMC,MAAMqE,QAAQlC,EAAW+F,SAAS5D,IAActC,MAAK,SAACgG,GAC1DC,EAAQD,MAKV,yBAAKxC,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACZwC,EACC,kBAAC,IAAD,iBAAUjI,EAAV,CAAiBiI,KAAMA,KAEvB,yBAAKxC,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,iBAKR,yBAAKA,UAAU,gCACZzF,EAAMmC,UAAY,kBAAC,IAAcnC,Q,uEC9B5C,+DAKAoI,IAASC,OAAO,kBAAC,IAAD,MAASC,SAASC,eAAe,U,8NCLjD,oCAoCeC,IAhCf,SAAmBxI,GACjB,IAEM8B,EAFeY,OAAO+F,KAAKzI,EAAM8B,WAAW4G,QAAO,SAACtG,GAAD,QAAiBA,KAAapC,EAAM6E,eAE9D4C,KAAI,SAACrF,GAClC,IAAMoC,EAAG,YAAQpC,GACjB,OACE,yBAAKoC,IAAKA,EAAKiB,UAAU,YACvB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,kBAAC,IAAD,eAAarD,UAAWA,GAAepC,UAOjD,OAAQA,EAAM2B,UAMTG,EAAUP,OAAS,EACtB,6BACE,2CACCO,GAGH,8BAXA,yBAAK2D,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,kB,wGCmCOkD,MAvDf,SAAsB3I,GACpB,IAAMoC,EAAYpC,EAAMoC,UAClB9B,EAAUN,EAAMM,QAFK,4CAI3B,sBAAAgC,EAAA,yDACOtC,EAAM8E,qBADb,uBAEI8D,MAAM,iCAFV,6BAKO5I,EAAM6E,cAAezC,KAAapC,EAAM6E,YAL/C,wDAQE7E,EAAMC,MAAMyE,YAAYG,WAAWzC,GAAa9B,EAChDN,EAAMuF,YAAY,CAChBV,WAAYnC,OAAOC,OAAO,GAAI3C,EAAMC,MAAMyE,YAAYG,cAV1D,SAYQ7E,EAAMC,MAAMwD,SAASoF,OAAO,CAAC9H,WAAYqB,IAZjD,4CAJ2B,kEAmB3B,sBAAAE,EAAA,yDACOtC,EAAM6E,YAAgBzC,KAAapC,EAAM6E,WADhD,+DAIS7E,EAAMC,MAAMyE,YAAYG,WAAWzC,GAC1CpC,EAAMuF,YAAY,CAChBV,WAAYnC,OAAOC,OAAO,GAAI3C,EAAMC,MAAMyE,YAAYG,cAN1D,SAQQ7E,EAAMC,MAAMwD,SAASqF,SAAS,CAAC/H,WAAYqB,IARnD,4CAnB2B,sBA8B3B,OACE,yBAAKqD,UAAU,sBACVnF,EAIE8B,IAAcpC,EAAMqC,gBACvB,yCACGrC,EAAM6E,YAAezC,KAAapC,EAAM6E,WAC3C,4BAAQY,UAAU,+BAA+BC,QAvC5B,4CAuC+C,4CACjE1F,EAAMmC,SACT,4BACEsD,UAAU,qCACVC,QA3CmB,4CAyCrB,UAKA,4BACED,UAAU,uCACVsD,UAAU,GAFZ,qBAbA,yBAAKtD,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,iB,yBCgFKuD,IA9Gf,SAAqBhJ,GAAQ,IAAD,EACImH,mBAAS,MADb,mBACnB7G,EADmB,KACV2I,EADU,OAEkB9B,mBAAS,IAF3B,mBAEnB+B,EAFmB,KAEHC,EAFG,OAGchC,mBAAS,IAHvB,mBAGnBiC,EAHmB,KAGLC,EAHK,OAIIlC,oBAAS,GAJb,mBAInBmC,EAJmB,KAIVC,EAJU,OAKUpC,oBAAS,GALnB,mBAKnBqC,EALmB,KAKPC,EALO,OAMZtC,mBAASuC,OAAhBlF,EANmB,oBAQpBmF,EAAS3J,EAAM2J,OACfvH,EAAYpC,EAAMoC,UAElBwH,EAAeC,sBAAW,sBAAC,4BAAAvH,EAAA,sEACXtC,EAAMC,MAAM8D,WAAW3B,GADZ,OAC3B9B,EAD2B,OAE/B2I,EAAW3I,GACPN,EAAMmC,UAAYnC,EAAMqC,kBAAoBD,IAC9CqH,EAAcrH,KAAapC,EAAM8B,WACjCxB,EAAQ0E,iBAAiB/C,MAAK,WAC5BkH,EAAkBzG,OAAO+F,KAAKnI,EAAQwB,WAAW4G,QAAO,SAACtG,GAAD,OAAgBA,KAAapC,EAAM6E,kBAE7FvE,EAAQsE,kBAAkB3C,MAAK,WAC7BoH,EAAgB3G,OAAO+F,KAAKnI,EAAQuE,YAAY6D,QAAO,SAACtG,GAAD,QAAiBA,KAAapC,EAAM6E,aAAezC,IAAcpC,EAAMqC,wBATnG,2CAY9B,CAACD,EAAWpC,EAAMC,MAAOD,EAAM6E,WAAY7E,EAAMmC,SAAUnC,EAAMqC,gBAAiBrC,EAAM8B,YAE3FwF,qBAAU,YACJtH,EAAM2B,WAAcgI,GAAYrJ,GAAWA,EAAQ8B,YAAcA,IACnEmH,GAAW,GACXK,IAAe3H,MAAK,kBAAMsH,GAAW,SAEtC,CAACvJ,EAAM2B,UAAWS,EAAWuH,EAAQrJ,EAASsJ,IAEjD,IAAM9H,EAAYoH,EAAeY,MAAM,EAA8B,IAA1BZ,EAAe3H,OAAgB,EAAI,GAAGkG,KAC/E,SAACrF,EAAW2H,GAAZ,OACE,0BAAMvF,IAAG,YAAOA,EAAP,YAAcpC,IACpB2H,EAAI,GAAK,KACV,kBAAC,IAAD,iBAAa/J,EAAb,CAAoBoC,UAAWA,SAK/B4H,EAAqBd,EAAe3H,OAASO,EAAUP,OAEvDQ,EAAYqH,EAAaU,MAAM,EAA4B,IAAxBV,EAAa7H,OAAgB,EAAI,GAAGkG,KAC3E,SAACrF,EAAW2H,GAAZ,OACE,0BAAMvF,IAAG,YAAOA,EAAP,YAAcpC,IACpB2H,EAAI,GAAK,KACV,kBAAC,IAAD,iBAAa/J,EAAb,CAAoBoC,UAAWA,SAK/B6H,EAAqBb,EAAa7H,OAASQ,EAAUR,OAE3D,OACE,6BACE,6BACE,4BAAI,kBAAC,IAAD,CAAMkE,UAAU,iBAAiBO,GAAE,aAAQ5D,IAA3C,IAA0DA,KAE9DkH,EACA,yBAAK7D,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,gBAGFnF,EACF,6BACE,kBAAC,EAAD,iBAAkBN,EAAlB,CAAyBoC,UAAWA,EAAW9B,QAASA,KACxD,yBAAKmF,UAAU,QACb,6BACE,0BAAMA,UAAU,WACbnF,EAAQyE,MAAMmF,SAAW,2BAAI5J,EAAQyE,MAAMmF,UAAgB,0BAAMzE,UAAU,cAAhB,MAD9D,IACsG,0BAAMA,UAAU,cAAhB,OAA6D,IAA3BnF,EAAQyE,MAAMmF,UAAkB,MAEvKV,GAAc,0BAAM/D,UAAU,sBAAhB,gBAEjB,6BACE,kBAAC,IAAD,CAAMO,GAAE,aAAQ5D,EAAR,cAA+BqD,UAAU,uBAC/C,0BAAMA,UAAU,WAAU,2BAAInF,EAAQyE,MAAMoF,cAA5C,IAA8D,0BAAM1E,UAAU,cAAhB,eAEhE,kBAAC,IAAD,CAAMO,GAAE,aAAQ5D,EAAR,cAA+BqD,UAAU,uBAC/C,8BAAM,2BAAInF,EAAQyE,MAAMqF,cAAxB,IAA0C,0BAAM3E,UAAU,cAAhB,iBAI/CzF,EAAMmC,UAAYC,IAAcpC,EAAMqC,iBACrC,6BACE,yBAAKoD,UAAU,cACX3D,EAAUP,OAAS,EACnB,4CACeO,EADf,IAC2BkI,EAAkB,eAAWA,EAAX,sBAAoD,IAGjG,mCAGFjI,EAAUR,OAAS,GACnB,yBAAKkE,UAAU,cAAf,WACW1D,EADX,IACuBkI,EAAkB,eAAWA,EAAX,4BAA0D,MAO3G,yD,4HCrCOI,IArEf,SAAcrK,GAAQ,IAAD,EACWmH,oBAAS,GADpB,mBACZmC,EADY,KACHC,EADG,OAEOpC,mBAAS,IAFhB,mBAEZ9C,EAFY,KAELiG,EAFK,OAGJnD,mBAASuC,OAAjBa,EAHY,oBAKbhD,EAAOvH,EAAMuH,KACbK,EAAa5H,EAAM4H,YAAc,GAEjC4C,EAAaX,sBAAW,uCAAC,WAAOnI,GAAP,2BAAAY,EAAA,sDACvB+B,EAAQ,GACRoG,EAASC,oBAAUnD,GAFI,YAGtBkD,EAAOlJ,OAAS,GAAK8C,EAAM9C,OAAS,IAHd,sBAIMkJ,EAAOE,MAJb,mBAIpBpG,EAJoB,KAIPnC,EAJO,KAKP,IAAhBmC,EALuB,mEASRvE,EAAMC,MAAMqE,QAAQlC,EAAWmC,GATvB,YASrB0D,EATqB,4BAWrBA,EAAKP,eAAiB,GACxB+C,EAAO9C,KAAK,CAACM,EAAKP,eAAgBtF,IAEpCiC,EAAMsD,KAAKM,IACPvG,EAAMkJ,QAfe,iBAgBvBN,EAAS,GAAD,OAAKjG,IAhBU,uHAAD,sDAsB3B,CAACkD,EAAMvH,EAAMC,QAEhBqH,qBAAU,WACR,IAAI5F,EAAQ,CACVkJ,SAAS,GAQX,OANArB,GAAW,GACXiB,EAAW9I,GAAOO,MAAK,WACjBP,EAAMkJ,SACRrB,GAAW,MAGR,WACL7H,EAAMkJ,SAAU,KAEjB,CAACrD,EAAMiD,IAEV,IAAMK,EAAO,sBAAIjD,GAAJ,YAAmBvD,IAAOoD,KAAI,SAAAQ,GACzC,IAAMzD,EAAG,UAAM+F,EAAN,YAActC,EAAK7F,UAAnB,YAAgC6F,EAAK1D,aAC9C,OAAO,kBAAC,IAAD,iBAAUvE,EAAV,CAAiBwE,IAAKA,EAAKyD,KAAMA,QAE1C,OACE,6BACI4C,EAAKtJ,OAAS,EAAKsJ,GAAQvB,GAC3B,yBAAK7D,UAAU,cAAf,aAID6D,GACC,yBAAK7D,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,mB,4GChCGqF,IA3Bf,SAAiB9K,GAAQ,IAAD,EACMmH,oBAAS,GADf,mBACfwC,EADe,KACPoB,EADO,OAER5D,mBAASuC,OAAhBlF,EAFe,oBAGhBpC,EAAYpC,EAAMoC,UAExB,OACE,yBAAKqD,UAAU,WACb,kBAAC,IAAD,CAAMA,UAAU,iBAAiBuF,YAAA,EAASC,WAAUzG,EAAKwB,GAAE,aAAQ5D,IAAnE,IAAkFA,GAClF,kBAAC,IAAD,CACEsE,GAAIlC,EACJxB,KAAK,QACLkI,QAAQ,EACRC,YAAY,qBACZ1F,UAAU,kBACV2F,UAAW,IACXC,UAAW,IACXC,OAAO,QACPC,UAAW,kBAAMR,GAAU,IAC3BS,UAAW,kBAAMT,GAAU,KAE3B,kBAAC,IAAD,iBAAiB/K,EAAjB,CAAwBoC,UAAWA,EAAWuH,OAAQA,S,0GCgC/C8B,IAvDf,SAAiBzL,GAAQ,IAAD,EACImH,mBAAS,IADb,mBACduE,EADc,KACRC,EADQ,OAEUxE,oBAAS,GAFnB,mBAEdmC,EAFc,KAELC,EAFK,KAIhBtB,EAAI,uCAAG,8BAAA3F,EAAA,6DACPsJ,EAAQF,EACZnC,GAAW,GACXoC,EAAQ,IAHG,KAIIE,IAJJ,SAIsB7L,EAAMC,MAAMwD,SAASwE,KAAK,CAACyD,KAAME,IAJvD,oBAIP/J,GAJO,eAKFO,UAAYpC,EAAMqC,gBAC3BrC,EAAMuF,YAAY,CAChB1D,SAAS,GAAD,mBAAM7B,EAAM6B,UAAZ,CAAsBA,MAEhC0H,GAAW,GATA,4CAAH,qDAYV,OAAOvJ,EAAM8E,qBACX,6BACE,8BACE,yBAAKW,UAAU,QACb,8BACEA,UAAU,eAAeqG,YAAa,WAAYC,KAAK,IAAIC,MAAON,EAClEO,SAAU,SAAChH,GAAD,OAAO0G,EAAQ1G,EAAEiH,OAAOF,WAGtC,yBAAKvG,UAAU,sDACb,4BAAQA,UAAU,kBAAkBsD,UAAW2C,EAAMhG,QAASuC,GAC3DqB,EACC,8BACE,0BAAM7D,UAAU,+BAA+BG,KAAK,SAASC,cAAY,SACzE,0BAAMJ,UAAU,mBAAhB,cACC,IAHH,WAMA,8CAOV,yBAAKA,UAAU,QACb,6BACE,yBAAKA,UAAU,qBAAqBG,KAAK,SACvC,0DAAkC,6BADpC,8DAKF,6BACE,kBAAC,IAAqB5F,O,+ICrDxB6L,EAAc,SAAC5D,GACnB,MAAO,CACLyD,KAAMzD,EAAKyD,KACXS,KAAM,IAAIC,KAAKC,WAAWpE,EAAKkE,MAAQ,KACvC5H,YAAa0D,EAAKqE,aAClB5E,eAAgBO,EAAKsE,mBAInB9H,E,WACJ,WAAYxE,EAAOmC,EAAWoK,GAAqB,oBACjD1J,KAAK7C,MAAQA,EACb6C,KAAKV,UAAYA,EACjBU,KAAK0J,mBAAqBA,EAC1B1J,KAAK2J,QAAS,E,gFAUhB,4BAAAnK,EAAA,sEACqBQ,KAAK7C,MAAMC,cAAc4C,KAAK0J,mBAAoB,WAAY,CAACzL,WAAY+B,KAAKV,YADrG,QACQ6F,EADR,SAGIvF,OAAOC,OAAOG,KAAM+I,EAAY5D,IAElCnF,KAAK2J,QAAS,EALhB,gD,iHAPA,WAAkBxM,EAAOmC,EAAWoK,GAApC,8EACMvE,EAAO,IAAIxD,EAASxE,EAAOmC,EAAWoK,GAD5C,SAEQvE,EAAKyE,QAFb,gCAGSzE,GAHT,2C,8ICCa0E,IAhBf,SAA0B3M,GAAO,4CAC/B,WAAqCiF,GAArC,SAAA3C,EAAA,6DACE2C,EAAEC,iBADJ,SAEQlF,EAAMC,MAAMwD,SAASmJ,gBAAgB,GAAI,iBAAkB,4BAFnE,4CAD+B,sBAM/B,OAAQ5M,EAAM8E,sBACZ,4BACEW,UAAU,0BACVC,QAT4B,SAAD,oCAO7B,yB,gCCTJ,oDAuBemH,IAjBf,SAAc7M,GACZ,IAAMiI,EAAOjI,EAAMiI,KACnB,OACE,yBAAKxC,UAAU,aACb,yBAAKA,UAAU,aACb,wBAAIA,UAAU,cAAa,kBAAC,IAAD,iBAAazF,EAAb,CAAoBoC,UAAW6F,EAAK7F,cAC/D,wBAAIqD,UAAU,iCACZ,kBAAC,IAAD,CAAMA,UAAU,YAAYO,GAAE,aAAQiC,EAAK7F,UAAb,YAA0B6F,EAAK1D,cAAe,kBAAC,IAAD,CAASuI,SAAU7E,EAAKkE,SAEtG,yBAAK1G,UAAU,aACZwC,EAAKyD,U,qICdVqB,EAA0B,IAAIC,IAAG,2BAGjCC,EAAsB,SAACC,GAC3B,MAAO,CACLhD,SAAUgD,EAAaC,UACvB/C,aAAc8C,EAAaE,cAC3BjD,aAAc+C,EAAaG,cAC3B3F,eAAgBwF,EAAaX,mBAI3BrI,E,WACJ,WAAYjE,EAAOmC,EAAW8K,GAAe,oBAC3CpK,KAAK7C,MAAQA,EACb6C,KAAKV,UAAYA,EACjBU,KAAKiC,MAAQ,CACX2C,eAAgB,EAChB0C,aAAc,EACdD,aAAc,EACdD,SAAU,EACVpF,sBAAsB,GAEpBoI,GACFxK,OAAOC,OAAOG,KAAKiC,MAAOkI,EAAoBC,IAC9CpK,KAAK2J,QAAS,GAEd3J,KAAK2J,QAAS,EAEhB3J,KAAK+B,YAAa,EAClB/B,KAAKhB,WAAY,EACjBgB,KAAK7C,MAAMmE,aAAahC,EAAWU,M,8FASrC,4BAAAR,EAAA,sEAC6BQ,KAAK7C,MAAMwD,SAAS6J,mBAAmB,CAACvM,WAAY+B,KAAKV,YADtF,OACMmL,EADN,OAEEzK,KAAKiC,MAAMyI,aAAe,IAAIR,IAAGO,EAAeE,OAChD3K,KAAKiC,MAAM2I,iBAAmB,IAAIV,IAAGO,EAAeI,WACpD7K,KAAKiC,MAAMD,qBAAuBhC,KAAKiC,MAAM2I,iBAAmBX,EAJlE,gD,4HAOA,4BAAAzK,EAAA,sEAC6BQ,KAAK7C,MAAMwD,SAASmK,YAAY,CAAC7M,WAAY+B,KAAKV,YAD/E,QACQ8K,EADR,UAGIxK,OAAOC,OAAOG,KAAKiC,MAAOkI,EAAoBC,IAC9CpK,KAAK2J,QAAS,GAJlB,gD,0HAQA,qCAAAnK,EAAA,0DAC0B,IAApBQ,KAAK+B,WADX,gCAEU/B,KAAK+K,gBAFf,wCAME,IADMC,EAAW,GACR/D,EAAI,EAAGA,EAAIjH,KAAKiC,MAAMoF,aAAcJ,GA5D9B,IA6Db+D,EAASnG,KAAK7E,KAAK7C,MAAMwD,SAASsK,cAAc,CAC9ChN,WAAY+B,KAAKV,UACjB4L,WAAYjE,EACZkE,MAhEW,OAsDjB,OAaEnL,KAAK+B,WAAa,GAClB/B,KAAK+K,gBAAkB,IAAI7J,QAAJ,uCAAY,WAAOC,GAAP,SAAA3B,EAAA,sEAC1B0B,QAAQkK,IAAIJ,GADc,cACHK,OAAOC,SAAQ,YAAgC,IAAD,mBAA7BhM,EAA6B,KAAlB8K,EAAkB,KAC1E,EAAKrI,WAAWzC,GAAa,IAAI8B,EAAY,EAAKjE,MAAOmC,EAAW8K,MAEtEjJ,IAJiC,2CAAZ,uDAdzB,UAoBQnB,KAAK+K,gBApBb,iD,yHAuBA,qCAAAvL,EAAA,0DACyB,IAAnBQ,KAAKhB,UADX,gCAEUgB,KAAKuL,eAFf,wCAME,IADMP,EAAW,GACR/D,EAAI,EAAGA,EAAIjH,KAAKiC,MAAMqF,aAAcL,GAnF9B,IAoFb+D,EAASnG,KAAK7E,KAAK7C,MAAMwD,SAAS6K,cAAc,CAC9CvN,WAAY+B,KAAKV,UACjB4L,WAAYjE,EACZkE,MAvFW,OA6EjB,OAaEnL,KAAKhB,UAAY,GACjBgB,KAAKuL,eAAiB,IAAIrK,QAAJ,uCAAY,WAAOC,GAAP,SAAA3B,EAAA,sEACzB0B,QAAQkK,IAAIJ,GADa,cACFK,OAAOC,SAAQ,YAAgC,IAAD,mBAA7BhM,EAA6B,KAAlB8K,EAAkB,KAC1E,EAAKpL,UAAUM,GAAa,IAAI8B,EAAY,EAAKjE,MAAOmC,EAAW8K,MAErEjJ,IAJgC,2CAAZ,uDAdxB,UAoBQnB,KAAKuL,eApBb,iD,iHA5CA,WAAkBpO,EAAOmC,GAAzB,8EACM9B,EAAU,IAAI4D,EAAYjE,EAAOmC,GADvC,SAEQ9B,EAAQiO,oBAFhB,gCAGSjO,GAHT,2C,mLCuBakO,IAnDf,SAAsBxO,GAAQ,IAAD,EACHmH,oBAAS,GADN,mBACpBI,EADoB,KACdkH,EADc,KAGrBC,EAAY7E,sBAAW,sBAAC,4BAAAvH,EAAA,0DACxBtC,EAAM2B,UADkB,gCAEA3B,EAAMC,MAAMwD,SAASkL,mBAFrB,cAEpBC,EAFoB,gBAGZ5O,EAAMC,MAAMwD,SAASoL,aAAa,CAC9Cb,WAAYc,KAAKC,IAAIH,EATV,IASoC,GAC/CX,MAVW,MAKa,uCAMtBxG,KAAI,YAAgC,IAAD,mBAA7BrF,EAA6B,KAAlB8K,EAAkB,KAErC,MAAO,CADO,IAAIhJ,IAAYlE,EAAMC,MAAOmC,EAAW8K,GACtCnI,MAAM2C,eAAgBtF,OARd,iCAWnB,GAXmB,4CAa3B,CAACpC,EAAM2B,UAAW3B,EAAMC,QAO3B,OALAqH,qBAAU,WACRoH,IAAYzM,KAAKwM,KAChB,CAACC,IAIF,6BACE,yBAAKjJ,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACZ8B,GAAQA,EAAKhG,OAAS,GACrB,6BACE,wCACA,kBAAC,IAAD,iBAAUvB,EAAV,CAAiBuH,KAAMA,OAGzBA,GACA,yBAAK9B,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,iBAKR,yBAAKA,UAAU,gCACZzF,EAAMmC,UAAY,kBAAC,IAAcnC,S,2JCoB/BgP,MAnEf,SAAmBhP,GACjB,IAAMoC,EAAYpC,EAAMoC,UADA,EAEM+E,mBAAS,MAFf,mBAEjB7G,EAFiB,KAER2I,EAFQ,OAGI9B,mBAAS,IAHb,mBAGjB0B,EAHiB,KAGToG,EAHS,OAIM9H,oBAAS,GAJf,mBAIjBmC,EAJiB,KAIRC,EAJQ,OAKTpC,mBAASuC,OAAjBa,EALiB,oBAOlB2E,EAAgBlP,EAAMkP,cACtBvF,EAAS3J,EAAM2J,OAEfC,EAAeC,sBAAW,sBAAC,kCAAAvH,EAAA,sEACXtC,EAAMC,MAAM8D,WAAW3B,GADZ,UAC3B9B,EAD2B,OAE/B2I,EAAW3I,IAEP4O,EAJ2B,iCAKvB5O,EAAQ0E,iBALe,OAM7BmK,EAAO7O,EAAQwB,UANc,yCAQvBxB,EAAQsE,kBARe,QAS7BuK,EAAO7O,EAAQuE,WATc,QAW3B7E,EAAMmC,UAAYnC,EAAMqC,kBAAoBD,GACxCgN,EAAe1M,OAAO+F,KAAK0G,GAAMzG,QAAO,SAACtG,GAAD,QAAiBA,KAAapC,EAAM6E,eAC5E9C,EAAYW,OAAO+F,KAAK0G,GAAMzG,QAAO,SAACtG,GAAD,OAAgBA,KAAapC,EAAM6E,cAE9EoK,EAAU,GAAD,mBAAKG,GAAL,YAAsBrN,MAE/BkN,EAAUvM,OAAO+F,KAAK0G,IAjBO,4CAmB9B,CAAC/M,EAAWpC,EAAMC,MAAOD,EAAM6E,WAAY7E,EAAMmC,SAAUnC,EAAMqC,gBAAiB6M,IAErF5H,qBAAU,WACJtH,EAAM2B,YAAcgI,IACtBJ,GAAW,GACXK,IAAe3H,MAAK,kBAAMsH,GAAW,SAEtC,CAACnH,EAAWpC,EAAM2B,UAAWgI,EAAQrJ,EAASsJ,EAAcsF,IAG/D,IAAMC,EAAOtG,EAAOpB,KAAI,SAACrF,GACvB,IAAMoC,EAAG,UAAM+F,EAAN,cAAgBnI,GACzB,OACE,yBAAKoC,IAAKA,EAAKiB,UAAU,YACvB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,kBAACuD,EAAA,EAAD,iBAAkBhJ,EAAlB,CAAyBoC,UAAWA,WAO9C,OAAOkH,EACH,yBAAK7D,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,gBAGD0J,EAAK5N,OAAS,EACnB,6BACG4N,GAGD,yBAAK1J,UAAU,cAAf,mB,OCmBS4J,IA5Ef,SAAqBrP,GAAQ,IAAD,EACIgI,cAAtB5F,EADkB,EAClBA,UAAWkN,EADO,EACPA,OADO,EAEFnI,oBAAS,GAFP,mBAEnBI,EAFmB,KAEbkH,EAFa,KAY1B,OARAnH,qBAAU,WACJtH,EAAM2B,WACR3B,EAAMC,MAAM8D,WAAW3B,GAAWH,MAAK,SAAC3B,GACtCmO,EAAQ,CAAC,CAACnO,EAAQyE,MAAM2C,eAAgBpH,EAAQ8B,kBAGnD,CAACpC,EAAM2B,UAAW3B,EAAMC,MAAOmC,IAGhC,yBAAKqD,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACZzF,EAAM2B,WACL,6BACE,kBAACqH,EAAA,EAAD,iBAAiBhJ,EAAjB,CAAwBoC,UAAWA,KACnC,yBAAKqD,UAAU,SACf,wBAAIA,UAAU,qBAAqBiB,GAAG,aAAad,KAAK,WACtD,wBAAIH,UAAU,WAAWG,KAAK,gBAC5B,kBAAC,IAAD,CAAMI,GAAE,aAAQ5D,GAAaqD,UAAS,kBAAc6J,EAAqB,GAAZ,WAAkB5I,GAAG,YAC1E1D,KAAK,SAASuD,gBAAc,QAAQgJ,iBAAgBD,GAASlN,IAAcpC,EAAMqC,iBAAmB,QAD5G,WAIF,wBAAIoD,UAAU,WAAWG,KAAK,gBAC5B,kBAAC,IAAD,CAAMI,GAAE,aAAQ5D,EAAR,cAA+BqD,UAAS,kBAAwB,cAAX6J,EAAyB,UAAY,IAAM5I,GAAG,gBACnGd,KAAK,MAAMW,gBAAc,YAAYgJ,gBAA0B,cAAXD,GAD5D,cAIF,wBAAI7J,UAAU,WAAWG,KAAK,gBAC5B,kBAAC,IAAD,CAAMI,GAAE,aAAQ5D,EAAR,cAA+BqD,UAAS,kBAAwB,cAAX6J,EAAyB,UAAY,IAAM5I,GAAG,gBACnGd,KAAK,MAAMW,gBAAc,YAAYgJ,gBAA0B,cAAXD,GAD5D,eAKJ,yBAAK7J,UAAU,eACV6J,EAeY,cAAXA,EACF,6BACE,kBAAC,EAAD,iBAAetP,EAAf,CAAsBkP,eAAe,EAAO9M,UAAWA,EAAWuH,OAAmB,cAAX2F,MAE/D,cAAXA,EACF,6BACE,kBAAC,EAAD,iBAAetP,EAAf,CAAsBkP,eAAe,EAAM9M,UAAWA,EAAWuH,OAAmB,cAAX2F,MAG3E,oCAvBA,6BACGlN,IAAcpC,EAAMqC,iBACnB,kBAACoJ,EAAA,EAAYzL,GAEduH,EACC,kBAAC8C,EAAA,EAAD,iBAAUrK,EAAV,CAAiBuH,KAAMA,KAEvB,yBAAK9B,UAAU,iCACb,yBAAKA,UAAU,eAAeG,KAAK,UACjC,0BAAMH,UAAU,mBAAhB,oBAoBlB,yBAAKA,UAAU,gCACZzF,EAAMmC,UAAY,kBAACqG,EAAA,EAAcxI,Q","file":"static/js/main.6b9c2f5d.chunk.js","sourcesContent":["import React from 'react';\nimport \"error-polyfill\";\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.scss\";\nimport './gh-fork-ribbon.css';\nimport HomePage from \"./pages/Home\"\nimport AccountPage from \"./pages/Account\"\nimport {HashRouter as Router, Link, Route, Switch} from 'react-router-dom'\nimport * as nearAPI from 'near-api-js'\nimport {AccountData} from \"./data/Account\";\nimport NearVodkaLogo from \"./images/near_vodka_logo.png\"\nimport PostPage from \"./pages/Post\";\nimport {PostData} from \"./data/Post\";\nimport DiscoverPage from \"./pages/Discover\";\nimport AddStorageButton from \"./components/AddStorageButton\";\n\n// 4 epochs\nconst NumBlocksNonArchival = 4 * 12 * 3600;\n\nconst IsMainnet = window.location.hostname === \"near.vodka\";\nconst TestNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  archivalNodeUrl: 'https://rpc.testnet.internal.near.org',\n  contractName: 'dev-1613368835598-7014445',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\n\nconst MainNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  archivalNodeUrl: 'https://rpc.testnet.internal.near.org',\n  contractName: 'dev-1613368835598-7014445',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\n\n// const MainNearConfig = {\n//   networkId: 'mainnet',\n//   nodeUrl: 'https://rpc.mainnet.near.org',\n//   contractName: 'berryclub.ek.near',\n//   walletUrl: 'https://wallet.near.org',\n// };\nconst NearConfig = IsMainnet ? MainNearConfig : TestNearConfig;\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._near = {\n      async blockViewCall(blockId, methodName, args) {\n        args = args || {};\n        this.account.validateArgs(args);\n        const connection = blockId + NumBlocksNonArchival < this.lastBlockHeight ?\n          this.archivalConnection :\n          this.account.connection;\n        const result = await connection.provider.query({\n          request_type: 'call_function',\n          block_id: blockId,\n          account_id: NearConfig.contractName,\n          method_name: methodName,\n          args_base64: new Buffer(JSON.stringify(args), 'utf8').toString('base64'),\n        });\n        return result.result && result.result.length > 0 && JSON.parse(Buffer.from(result.result).toString());\n      }\n    };\n\n    this.state = {\n      connected: false,\n      isNavCollapsed: true,\n      newPosts: [],\n      followers: {},\n      following: {},\n    };\n\n    this._initNear().then(() => {\n      this.setState({\n        signedIn: !!this._near.accountId,\n        signedAccountId: this._near.accountId,\n        connected: true,\n      });\n    });\n  }\n\n\n  async _initNear() {\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n    const near = await nearAPI.connect(Object.assign({deps: {keyStore}}, NearConfig));\n    this._near.archivalConnection = nearAPI.Connection.fromConfig({\n      networkId: NearConfig.networkId,\n      provider: { type: 'JsonRpcProvider', args: { url: NearConfig.archivalNodeUrl } },\n      signer: { type: 'InMemorySigner', keyStore }\n    });\n    this._near.keyStore = keyStore;\n    this._near.near = near;\n\n    this._near.walletConnection = new nearAPI.WalletConnection(near, NearConfig.contractName);\n    this._near.accountId = this._near.walletConnection.getAccountId();\n\n    this._near.account = this._near.walletConnection.account();\n    const block = await this._near.account.connection.provider.block({ finality: 'final' });\n    this._near.lastBlockHeight = block.header.height;\n    this._near.contract = new nearAPI.Contract(this._near.account, NearConfig.contractName, {\n      viewMethods: ['get_account', 'get_accounts', 'get_num_accounts', 'get_followers', 'get_following', 'get_post', 'storage_minimum_balance', 'storage_balance_of'],\n      changeMethods: ['storage_deposit', 'storage_withdraw', 'post', 'follow', 'unfollow'],\n    });\n    this._near.storageMinimumBalance = await this._near.contract.storage_minimum_balance();\n\n    this._near.accounts = {};\n    this._near.getAccount = (accountId) => {\n      if (accountId in this._near.accounts) {\n        return this._near.accounts[accountId];\n      }\n      return this._near.accounts[accountId] = Promise.resolve(AccountData.load(this._near, accountId));\n    };\n\n    this._near.cacheAccount = (accountId, account) => {\n      if (accountId in this._near.accounts) {\n        return;\n      }\n      this._near.accounts[accountId] = Promise.resolve(account);\n    };\n\n    this._near.posts = {};\n    this._near.getPost = (accountId, blockHeight) => {\n      const key = `${accountId}/${blockHeight}`;\n      if (key in this._near.posts) {\n        return this._near.posts[key];\n      }\n      return this._near.posts[key] = Promise.resolve(PostData.load(this._near, accountId, blockHeight));\n    };\n\n    if (this._near.accountId) {\n      this._near.accountData = await this._near.getAccount(this._near.accountId);\n      await this._near.accountData.fetchStorageBalance();\n      await this._near.accountData.fetchFollowings();\n      this.setState({\n        followings: Object.assign({}, this._near.accountData.followings),\n        enoughStorageBalance: this._near.accountData.stats.enoughStorageBalance,\n      });\n      this._near.accountData.fetchFollowers().then(() => {\n        this.setState({\n          followers: Object.assign({}, this._near.accountData.followers),\n        });\n      })\n    }\n  }\n\n\n  async requestSignIn(e) {\n    e.preventDefault();\n    const appTitle = 'NEAR Vodka';\n    await this._near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle\n    )\n    return false;\n  }\n\n  async logOut() {\n    this._near.walletConnection.signOut();\n    this._near.accountId = null;\n    this.setState({\n      signedIn: !!this._accountId,\n      signedAccountId: this._accountId,\n    })\n  }\n\n  render() {\n    const passProps = {\n      _near: this._near,\n      updateState: (s) => this.setState(s),\n      ...this.state\n    };\n    const header = !this.state.connected ? (\n      <div>Connecting... <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span></div>\n    ) : (this.state.signedIn ? (\n      <div>\n        <AddStorageButton {...passProps}/>\n        <button\n          className=\"btn btn-outline-secondary\"\n          onClick={() => this.logOut()}>Sign out ({this.state.signedAccountId})</button>\n      </div>\n    ) : (\n      <div>\n        <button\n          className=\"btn btn-primary\"\n          onClick={(e) => this.requestSignIn(e)}>Sign in with NEAR Wallet</button>\n      </div>\n    ));\n\n    return (\n      <div className=\"App\">\n        <Router basename={process.env.PUBLIC_URL}>\n          <nav className=\"navbar navbar-expand-lg navbar-light bg-light mb-3\">\n            <div className=\"container-fluid\">\n              <Link className=\"navbar-brand\" to=\"/\" title=\"NEAR Vodka - connecting people\">\n                <img src={NearVodkaLogo} alt=\"NEAR Vodka\" className=\"d-inline-block align-middle\" />\n                [TESTNET] NEAR Vodka\n              </Link>\n              <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                      aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span className=\"navbar-toggler-icon\"></span>\n              </button>\n              <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                  <li className=\"nav-item\">\n                    <Link className=\"nav-link\" aria-current=\"page\" to=\"/\">Home</Link>\n                  </li>\n                  {this.state.signedIn && (\n                    <li className=\"nav-item\">\n                      <Link className=\"nav-link\" aria-current=\"page\" to=\"/discover\">Discover</Link>\n                    </li>\n                  )}\n                  {this.state.signedIn && (\n                    <li className=\"nav-item\">\n                      <Link className=\"nav-link\" aria-current=\"page\"\n                            to={`/a/${this.state.signedAccountId}`}>Profile</Link>\n                    </li>\n                  )}\n                </ul>\n                <form className=\"d-flex\">\n                  {header}\n                </form>\n              </div>\n            </div>\n          </nav>\n\n          <a className=\"github-fork-ribbon right-bottom fixed\" href=\"https://github.com/evgenykuzyakov/near-vodka\" data-ribbon=\"Fork me on GitHub\"\n             title=\"Fork me on GitHub\">Fork me on GitHub</a>\n\n          <Switch>\n            <Route exact path={\"/\"}>\n              {this.state.signedIn ? (\n                <HomePage {...passProps}/>\n              ) : (\n                <DiscoverPage {...passProps}/>\n              )}\n            </Route>\n            <Route exact path={\"/discover\"}>\n              <DiscoverPage {...passProps}/>\n            </Route>\n            <Route exact path={\"/a/:accountId\"}>\n              <AccountPage {...passProps} />\n            </Route>\n            <Route path={\"/a/:accountId/:suffix\"}>\n              <AccountPage {...passProps} />\n            </Route>\n            <Route exact path={\"/p/:accountId/:blockHeight\"}>\n              <PostPage {...passProps} />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import \"./Home.scss\";\nimport React, {useEffect, useState} from 'react';\nimport NewPost from \"../components/NewPost\";\nimport Feed from \"../components/Feed\";\nimport Followers from \"../components/Followers\";\nimport {Link} from \"react-router-dom\";\n\nfunction HomePage(props) {\n  const [followingSeed, setFollowingSeed] = useState(false);\n\n  useEffect(() => {\n    if (props.connected) {\n      const accountData = props._near.accountData;\n      if (accountData) {\n        const seed = Object.entries(props.followings).map(\n          ([accountId, account]) => [account.stats.lastPostHeight, accountId]\n        );\n        if (accountData.stats.lastPostHeight > 0) {\n          seed.push([accountData.stats.lastPostHeight, accountData.accountId]);\n        }\n        setFollowingSeed(seed);\n      } else {\n        setFollowingSeed([]);\n      }\n    }\n  }, [props.connected, props.followings, props._near.accountData])\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row justify-content-md-center\">\n          <div className=\"col col-12 col-lg-8 col-xl-6\">\n            <NewPost {...props}/>\n            {(followingSeed && followingSeed.length > 0) ? (\n              <div>\n                <h3>Your Feed</h3>\n                <Feed {...props} seed={followingSeed} extraPosts={props.newPosts}/>\n              </div>\n            ) : followingSeed ? (\n              <div>\n                <h3>Feed is empty</h3>\n                <div>\n                  <Link to={\"/discover\"} className=\"btn btn-outline-secondary\">Discover more</Link>\n                </div>\n              </div>\n            ) :  (\n              <div className=\"d-flex justify-content-center\">\n                <div className=\"spinner-grow\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"col col-12 col-lg-4 col-xl-4\">\n            {props.signedIn && <Followers {...props} />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;\n","module.exports = __webpack_public_path__ + \"static/media/near_vodka_logo.f18e89c9.png\";","import React, {useState} from 'react';\nimport {useParams} from \"react-router\";\nimport Post from \"../components/Post\";\nimport Followers from \"../components/Followers\";\n\nfunction PostPage(props) {\n  const { accountId, blockHeight } = useParams();\n  const [post, setPost] = useState(false);\n\n  if (props.connected && props._near) {\n    props._near.getPost(accountId, parseInt(blockHeight)).then((post) => {\n      setPost(post);\n    })\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col col-12 col-lg-8 col-xl-6\">\n          {post ? (\n            <Post {...props} post={post}/>\n          ) : (\n            <div className=\"d-flex justify-content-center\">\n              <div className=\"spinner-grow\" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"col col-12 col-lg-4 col-xl-4\">\n          {props.signedIn && <Followers {...props} />}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PostPage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport './Post.scss';\nimport AccountCard from \"./AccountCard\";\n\nfunction Followers(props) {\n  const notFollowing = Object.keys(props.followers).filter((accountId) => !(accountId in props.followings));\n\n  const followers = notFollowing.map((accountId) => {\n    const key = `f/${accountId}`;\n    return (\n      <div key={key} className=\"follower\">\n        <div className=\"card mb-3\">\n          <div className=\"card-body\">\n            <AccountCard accountId={accountId} {...props}/>\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  return !props.connected ? (\n    <div className=\"d-flex justify-content-center\">\n      <div className=\"spinner-grow\" role=\"status\">\n        <span className=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n  ) : (followers.length > 0) ? (\n    <div>\n      <h3>Follow back</h3>\n      {followers}\n    </div>\n  ) : (\n    <div></div>\n  );\n}\n\nexport default Followers;\n","import React from 'react';\nimport './FollowButton.scss';\n\nfunction FollowButton(props) {\n  const accountId = props.accountId;\n  const account = props.account;\n\n  async function follow() {\n    if (!props.enoughStorageBalance) {\n      alert('Add storage balance to follow');\n      return;\n    }\n    if (!props.followings || (accountId in props.followings)) {\n      return;\n    }\n    props._near.accountData.followings[accountId] = account;\n    props.updateState({\n      followings: Object.assign({}, props._near.accountData.followings),\n    })\n    await props._near.contract.follow({account_id: accountId});\n  }\n\n  async function unfollow() {\n    if (!props.followings || !(accountId in props.followings)) {\n      return;\n    }\n    delete props._near.accountData.followings[accountId];\n    props.updateState({\n      followings: Object.assign({}, props._near.accountData.followings),\n    })\n    await props._near.contract.unfollow({account_id: accountId});\n  }\n\n  return (\n    <div className=\"follow-button mb-3\">\n      {(!account) ? (\n        <div className=\"spinner-grow\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      ) : (accountId === props.signedAccountId) ? (\n        <div>It's you</div>\n      ) : (props.followings && (accountId in props.followings)) ? (\n        <button className=\"btn btn-primary btn-unfollow\" onClick={unfollow}><span>Following</span></button>\n      ) : (props.signedIn) ? (\n        <button\n          className=\"btn btn-outline-primary btn-follow\"\n          onClick={follow}\n          >Follow</button>\n      ) : (\n        <button\n          className=\"btn btn-outline-secondary btn-follow\"\n          disabled={true}\n          >Sign in to Follow</button>\n      )}\n    </div>\n  );\n}\n\nexport default FollowButton;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport './Account.scss';\nimport {Link} from \"react-router-dom\";\nimport FollowButton from \"./FollowButton\";\nimport Account from \"./Account\";\nimport uuid from \"react-uuid\";\n\nfunction AccountCard(props) {\n  const [account, setAccount] = useState(null);\n  const [knownFollowers, setKnownFollowers] = useState([]);\n  const [newFollowing, setNewFollowing] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [followsYou, setFollowsYou] = useState(false);\n  const [key] = useState(uuid());\n\n  const hidden = props.hidden;\n  const accountId = props.accountId;\n\n  const fetchAccount = useCallback(async () => {\n    let account = await props._near.getAccount(accountId);\n    setAccount(account);\n    if (props.signedIn && props.signedAccountId !== accountId) {\n      setFollowsYou(accountId in props.followers);\n      account.fetchFollowers().then(() => {\n        setKnownFollowers(Object.keys(account.followers).filter((accountId) => (accountId in props.followings)));\n      });\n      account.fetchFollowings().then(() => {\n        setNewFollowing(Object.keys(account.followings).filter((accountId) => !(accountId in props.followings) && accountId !== props.signedAccountId));\n      });\n    }\n  }, [accountId, props._near, props.followings, props.signedIn, props.signedAccountId, props.followers])\n\n  useEffect(() => {\n    if (props.connected && !hidden && (!account || account.accountId !== accountId)) {\n      setLoading(true);\n      fetchAccount().then(() => setLoading(false))\n    }\n  }, [props.connected, accountId, hidden, account, fetchAccount]);\n\n  const followers = knownFollowers.slice(0, (knownFollowers.length === 4) ? 4 : 3).map(\n    (accountId, i) => (\n      <span key={`a-${key}-${accountId}`}>\n        {i > 0 && \", \"}\n        <Account {...props} accountId={accountId}/>\n      </span>\n    )\n  );\n\n  const followersAndOthers = knownFollowers.length - followers.length;\n\n  const following = newFollowing.slice(0, (newFollowing.length === 4) ? 4 : 3).map(\n    (accountId, i) => (\n      <span key={`b-${key}-${accountId}`}>\n        {i > 0 && \", \"}\n        <Account {...props} accountId={accountId}/>\n      </span>\n    )\n  );\n\n  const followingAndOthers = newFollowing.length - following.length;\n\n  return (\n    <div>\n      <div>\n        <h5><Link className=\"account-handle\" to={`/a/${accountId}`}>@{accountId}</Link></h5>\n      </div>\n      { loading ? (\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-grow\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      ) : account ? (\n        <div>\n          <FollowButton {...props} accountId={accountId} account={account}/>\n          <div className=\"mb-2\">\n            <div>\n              <span className=\"me-md-2\">\n                {account.stats.numPosts ? <b>{account.stats.numPosts}</b> : <span className=\"text-muted\">No</span>} <span className=\"text-muted\">post{account.stats.numPosts !== 1 && \"s\"}</span>\n              </span>\n              {followsYou && <span className=\"badge bg-secondary\">Follows You</span>}\n            </div>\n            <div>\n              <Link to={`/a/${accountId}/following`} className=\"following-followers\">\n                <span className=\"me-md-2\"><b>{account.stats.numFollowing}</b> <span className=\"text-muted\">following</span></span>\n              </Link>\n              <Link to={`/a/${accountId}/followers`} className=\"following-followers\">\n                <span><b>{account.stats.numFollowers}</b> <span className=\"text-muted\">followers</span></span>\n              </Link>\n            </div>\n          </div>\n          {props.signedIn && accountId !== props.signedAccountId && (\n            <div>\n              <div className=\"text-muted\">\n                { followers.length > 0 ? (\n                  <div>\n                    Followed by {followers} {followersAndOthers ? ` and ${followersAndOthers} others you follow` : \"\"}\n                  </div>\n                ) : (\n                  \"Not followed by anyone you know\"\n                )}\n              </div>\n              { following.length > 0 && (\n                <div className=\"text-muted\">\n                  Follows {following} {followingAndOthers ? ` and ${followingAndOthers} others you don't follow` : \"\"}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div>Error loading account</div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountCard;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport Post from \"./Post\";\nimport { SortedSet } from \"collections/sorted-set\";\nimport uuid from \"react-uuid\";\n\nfunction Feed(props) {\n  const [loading, setLoading] = useState(true);\n  const [posts, setPosts] = useState([]);\n  const [gkey] = useState(uuid())\n\n  const seed = props.seed;\n  const extraPosts = props.extraPosts || [];\n\n  const fetchPosts = useCallback(async (state) => {\n    const posts = [];\n    const recent = SortedSet(seed);\n    while (recent.length > 0 && posts.length < 30) {\n      const [blockHeight, accountId] = recent.pop();\n      if (blockHeight === 0) {\n        break;\n      }\n\n      const post = await props._near.getPost(accountId, blockHeight);\n      if (post) {\n        if (post.lastPostHeight > 0) {\n          recent.push([post.lastPostHeight, accountId])\n        }\n        posts.push(post);\n        if (state.mounted) {\n          setPosts([...posts]);\n        } else {\n          break;\n        }\n      }\n    }\n  }, [seed, props._near])\n\n  useEffect(() => {\n    let state = {\n      mounted: true\n    };\n    setLoading(true);\n    fetchPosts(state).then(() => {\n      if (state.mounted) {\n        setLoading(false)\n      }\n    })\n    return () => {\n      state.mounted = false;\n    }\n  }, [seed, fetchPosts]);\n\n  const feed = [...extraPosts, ...posts].map(post => {\n    const key = `${gkey}-${post.accountId}/${post.blockHeight}`;\n    return <Post {...props} key={key} post={post}/>;\n  });\n  return (\n    <div>\n      {(feed.length > 0) ? feed : !loading && (\n        <div className=\"text-muted\">\n          No posts.\n        </div>\n      )}\n      {loading && (\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-grow\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n","import React, {useState} from 'react';\nimport './Account.scss';\nimport ReactTooltip from \"react-tooltip\";\nimport {Link} from \"react-router-dom\";\nimport AccountCard from \"./AccountCard\";\nimport uuid from \"react-uuid\";\n\nfunction Account(props) {\n  const [hidden, setHidden] = useState(true);\n  const [key] = useState(uuid());\n  const accountId = props.accountId;\n\n  return (\n    <div className=\"account\">\n      <Link className=\"account-handle\" data-tip data-for={key} to={`/a/${accountId}`}>@{accountId}</Link>\n      <ReactTooltip\n        id={key}\n        type=\"light\"\n        border={true}\n        borderColor='rgb(222, 236, 230)'\n        className='account-tooltip'\n        delayHide={100}\n        delayShow={200}\n        effect='solid'\n        afterShow={() => setHidden(false)}\n        afterHide={() => setHidden(true)}\n      >\n        <AccountCard {...props} accountId={accountId} hidden={hidden} />\n\n      </ReactTooltip>\n    </div>\n  );\n}\n\nexport default Account;\n","import React, {useState} from 'react';\nimport {convertPost} from \"../data/Post\";\nimport AddStorageButton from \"./AddStorageButton\";\n\nfunction NewPost(props) {\n  const [ body, setBody ] = useState(\"\");\n  const [ loading, setLoading ] = useState(false);\n\n  const post = async () => {\n    let _body = body;\n    setLoading(true);\n    setBody(\"\");\n    let newPosts = convertPost(await props._near.contract.post({body: _body}));\n    newPosts.accountId = props.signedAccountId;\n    props.updateState({\n      newPosts: [...props.newPosts, newPosts]\n    })\n    setLoading(false);\n  };\n\n  return props.enoughStorageBalance ? (\n    <div>\n      <form>\n        <div className=\"mb-3\">\n          <textarea\n            className=\"form-control\" placeholder={\"New post\"} rows=\"5\" value={body}\n            onChange={(e) => setBody(e.target.value)}\n          />\n        </div>\n        <div className=\"mb-3 d-grid gap-2 d-md-flex justify-content-md-end\">\n          <button className=\"btn btn-primary\" disabled={!body} onClick={post}>\n            {loading ? (\n              <span>\n                <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                <span className=\"visually-hidden\">Loading...</span>\n                {' '}Posting\n              </span>\n            ) : (\n              <span>Post now</span>\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  ) : (\n    <div className=\"mb-3\">\n      <div>\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <b>Not enough storage balance!</b><br/>\n          Add storage balance to be able to post and follow people.\n        </div>\n      </div>\n      <div>\n        <AddStorageButton {...props}/>\n      </div>\n    </div>\n  );\n}\n\nexport default NewPost;\n","const convertPost = (post) => {\n  return {\n    body: post.body,\n    time: new Date(parseFloat(post.time) / 1_000_000),\n    blockHeight: post.block_height,\n    lastPostHeight: post.last_post_height,\n  };\n};\n\nclass PostData {\n  constructor(_near, accountId, requestBlockHeight) {\n    this._near = _near;\n    this.accountId = accountId;\n    this.requestBlockHeight = requestBlockHeight;\n    this._ready = false;\n  }\n\n  static async load(_near, accountId, requestBlockHeight) {\n    let post = new PostData(_near, accountId, requestBlockHeight);\n    await post.fetch();\n    return post;\n  }\n\n\n  async fetch() {\n    const post = await this._near.blockViewCall(this.requestBlockHeight, 'get_post', {account_id: this.accountId});\n    if (post) {\n      Object.assign(this, convertPost(post));\n    }\n    this._ready = true;\n  }\n}\n\nexport {PostData, convertPost};\n","import React from 'react';\n\nfunction AddStorageButton(props) {\n  async function requestStorageBalance(e) {\n    e.preventDefault();\n    await props._near.contract.storage_deposit({}, \"30000000000000\", \"100000000000000000000000\");\n  }\n\n  return !props.enoughStorageBalance && (\n    <button\n      className=\"btn btn-primary me-md-2\"\n      onClick={requestStorageBalance}\n    >\n      Add storage balance\n    </button>\n  );\n}\n\nexport default AddStorageButton;\n","import React from 'react';\nimport './Post.scss';\nimport Account from \"./Account\";\nimport TimeAgo from \"timeago-react\";\nimport {Link} from \"react-router-dom\";\n\nfunction Post(props) {\n  const post = props.post;\n  return (\n    <div className=\"card mb-3\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title\"><Account {...props} accountId={post.accountId} /></h5>\n        <h6 className=\"card-subtitle mb-2 text-muted\">\n          <Link className=\"post-link\" to={`/p/${post.accountId}/${post.blockHeight}`}><TimeAgo datetime={post.time} /></Link>\n        </h6>\n        <div className=\"card-text\">\n          {post.body}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Post;\n","import BN from \"bn.js\";\n\nconst MinEnoughStorageBalance = new BN(\"50000000000000000000000\");\nconst FetchLimit = 100;\n\nconst convertAccountStats = (accountStats) => {\n  return {\n    numPosts: accountStats.num_posts,\n    numFollowers: accountStats.num_followers,\n    numFollowing: accountStats.num_following,\n    lastPostHeight: accountStats.last_post_height,\n  };\n};\n\nclass AccountData {\n  constructor(_near, accountId, accountStats) {\n    this._near = _near;\n    this.accountId = accountId;\n    this.stats = {\n      lastPostHeight: 0,\n      numFollowers: 0,\n      numFollowing: 0,\n      numPosts: 0,\n      enoughStorageBalance: false,\n    };\n    if (accountStats) {\n      Object.assign(this.stats, convertAccountStats(accountStats));\n      this._ready = true;\n    } else {\n      this._ready = false;\n    }\n    this.followings = false;\n    this.followers = false;\n    this._near.cacheAccount(accountId, this);\n  }\n\n  static async load(_near, accountId) {\n    let account = new AccountData(_near, accountId);\n    await account.fetchAccountStats();\n    return account;\n  }\n\n  async fetchStorageBalance() {\n    let storageBalance = await this._near.contract.storage_balance_of({account_id: this.accountId});\n    this.stats.storageTotal = new BN(storageBalance.total);\n    this.stats.storageAvailable = new BN(storageBalance.available);\n    this.stats.enoughStorageBalance = this.stats.storageAvailable > MinEnoughStorageBalance;\n  }\n\n  async fetchAccountStats() {\n    const accountStats = await this._near.contract.get_account({account_id: this.accountId});\n    if (accountStats) {\n      Object.assign(this.stats, convertAccountStats(accountStats));\n      this._ready = true;\n    }\n  }\n\n  async fetchFollowings() {\n    if (this.followings !== false) {\n      await this.followingsFetch;\n      return;\n    }\n    const promises = [];\n    for (let i = 0; i < this.stats.numFollowing; i += FetchLimit) {\n      promises.push(this._near.contract.get_following({\n        account_id: this.accountId,\n        from_index: i,\n        limit: FetchLimit,\n      }));\n    }\n    this.followings = {};\n    this.followingsFetch = new Promise(async (resolve) => {\n      (await Promise.all(promises)).flat().forEach(([accountId, accountStats]) => {\n        this.followings[accountId] = new AccountData(this._near, accountId, accountStats);\n      });\n      resolve();\n    });\n    await this.followingsFetch;\n  }\n\n  async fetchFollowers() {\n    if (this.followers !== false) {\n      await this.followersFetch;\n      return;\n    }\n    const promises = [];\n    for (let i = 0; i < this.stats.numFollowers; i += FetchLimit) {\n      promises.push(this._near.contract.get_followers({\n        account_id: this.accountId,\n        from_index: i,\n        limit: FetchLimit,\n      }));\n    }\n    this.followers = {};\n    this.followersFetch = new Promise(async (resolve) => {\n      (await Promise.all(promises)).flat().forEach(([accountId, accountStats]) => {\n        this.followers[accountId] = new AccountData(this._near, accountId, accountStats);\n      });\n      resolve();\n    });\n    await this.followersFetch;\n  }\n}\n\nexport {AccountData, convertAccountStats};\n","import \"./Home.scss\";\nimport React, {useCallback, useEffect, useState} from 'react';\nimport Feed from \"../components/Feed\";\nimport {AccountData} from \"../data/Account\";\nimport Followers from \"../components/Followers\";\n\nconst FetchLimit = 100;\n\nfunction DiscoverPage(props) {\n  const [seed, setSeed] = useState(false);\n\n  const fetchSeed = useCallback(async () => {\n    if (props.connected) {\n      const numAccounts = await props._near.contract.get_num_accounts();\n      return (await props._near.contract.get_accounts({\n        from_index: Math.max(numAccounts - FetchLimit, 0),\n        limit: FetchLimit\n      })).map(([accountId, accountStats]) => {\n        let account = new AccountData(props._near, accountId, accountStats);\n        return [account.stats.lastPostHeight, accountId]\n      });\n    } else {\n      return false;\n    }\n  }, [props.connected, props._near])\n\n  useEffect(() => {\n    fetchSeed().then(setSeed);\n  }, [fetchSeed]);\n\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row justify-content-md-center\">\n          <div className=\"col col-12 col-lg-8 col-xl-6\">\n            {seed && seed.length > 0 && (\n              <div>\n                <h3>Discover</h3>\n                <Feed {...props} seed={seed}/>\n              </div>\n            )}\n            {!seed && (\n              <div className=\"d-flex justify-content-center\">\n                <div className=\"spinner-grow\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"col col-12 col-lg-4 col-xl-4\">\n            {props.signedIn && <Followers {...props} />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DiscoverPage;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport uuid from \"react-uuid\";\nimport AccountCard from \"./AccountCard\";\n\nfunction FollowTab(props) {\n  const accountId = props.accountId;\n  const [account, setAccount] = useState(null);\n  const [follow, setFollow] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [gkey] = useState(uuid());\n\n  const showFollowers = props.showFollowers;\n  const hidden = props.hidden;\n\n  const fetchAccount = useCallback(async () => {\n    let account = await props._near.getAccount(accountId);\n    setAccount(account);\n    let list;\n    if (showFollowers) {\n      await account.fetchFollowers();\n      list = account.followers;\n    } else {\n      await account.fetchFollowings();\n      list = account.followings;\n    }\n    if (props.signedIn && props.signedAccountId !== accountId) {\n      const notFollowing = Object.keys(list).filter((accountId) => !(accountId in props.followings));\n      const following = Object.keys(list).filter((accountId) => (accountId in props.followings));\n\n      setFollow([...notFollowing, ...following]);\n    } else {\n      setFollow(Object.keys(list));\n    }\n  }, [accountId, props._near, props.followings, props.signedIn, props.signedAccountId, showFollowers])\n\n  useEffect(() => {\n    if (props.connected && !hidden) {\n      setLoading(true);\n      fetchAccount().then(() => setLoading(false))\n    }\n  }, [accountId, props.connected, hidden, account, fetchAccount, showFollowers]);\n\n\n  const list = follow.map((accountId) => {\n    const key = `${gkey}-f/${accountId}`;\n    return (\n      <div key={key} className=\"follower\">\n        <div className=\"card mb-3\">\n          <div className=\"card-body\">\n            <AccountCard  {...props} accountId={accountId}/>\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  return loading ? (\n      <div className=\"d-flex justify-content-center\">\n        <div className=\"spinner-grow\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    ) : (list.length > 0) ? (\n    <div>\n      {list}\n    </div>\n    ) : (\n      <div className=\"text-muted\">No one is here</div>\n    );\n}\n\nexport default FollowTab;\n","import React, {useEffect, useState} from 'react';\nimport './Account.scss';\nimport {useParams} from \"react-router\";\nimport Feed from \"../components/Feed\";\nimport Followers from \"../components/Followers\";\nimport NewPost from \"../components/NewPost\";\nimport AccountCard from \"../components/AccountCard\";\nimport FollowTab from \"../components/FollowTab\";\nimport {Link} from \"react-router-dom\";\n\nfunction AccountPage(props) {\n  const { accountId, suffix } = useParams();\n  const [seed, setSeed] = useState(false);\n\n  useEffect(() => {\n    if (props.connected) {\n      props._near.getAccount(accountId).then((account) => {\n        setSeed([[account.stats.lastPostHeight, account.accountId]]);\n      })\n    }\n  }, [props.connected, props._near, accountId])\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col col-12 col-lg-8 col-xl-6\">\n          {props.connected && (\n            <div>\n              <AccountCard {...props} accountId={accountId} />\n              <div className=\"mb-3\"></div>\n              <ul className=\"nav nav-pills mb-2\" id=\"accountTab\" role=\"tablist\">\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to={`/a/${accountId}`} className={`nav-link${!suffix ? \" active\" : \"\"}`} id=\"posts-tab\"\n                          type=\"button\" aria-controls=\"posts\" aria-selected={!suffix}>{accountId === props.signedAccountId && \"Your \"} Posts\n                  </Link>\n                </li>\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to={`/a/${accountId}/following`} className={`nav-link${suffix === 'following' ? \" active\" : \"\"}`} id=\"following-tab\"\n                          role=\"tab\" aria-controls=\"following\" aria-selected={suffix === 'following'}>Following\n                  </Link>\n                </li>\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to={`/a/${accountId}/followers`} className={`nav-link${suffix === 'followers' ? \" active\" : \"\"}`} id=\"followers-tab\"\n                          role=\"tab\" aria-controls=\"followers\" aria-selected={suffix === 'followers'}>Followers\n                  </Link>\n                </li>\n              </ul>\n              <div className=\"tab-content\">\n                { !suffix ? (\n                  <div>\n                    {accountId === props.signedAccountId && (\n                      <NewPost {...props}/>\n                    )}\n                    {seed ? (\n                      <Feed {...props} seed={seed}/>\n                    ) : (\n                      <div className=\"d-flex justify-content-center\">\n                        <div className=\"spinner-grow\" role=\"status\">\n                          <span className=\"visually-hidden\">Loading...</span>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ) : suffix === 'following' ? (\n                  <div>\n                    <FollowTab {...props} showFollowers={false} accountId={accountId} hidden={suffix !== 'following'}/>\n                  </div>\n                ) : suffix === 'followers' ? (\n                  <div>\n                    <FollowTab {...props} showFollowers={true} accountId={accountId} hidden={suffix !== 'followers'}/>\n                  </div>\n                ) : (\n                  <div>Bug</div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"col col-12 col-lg-4 col-xl-4\">\n          {props.signedIn && <Followers {...props} />}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AccountPage;\n"],"sourceRoot":""}