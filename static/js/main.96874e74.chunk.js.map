{"version":3,"sources":["App.js","pages/Account.js","images/near_vodka_logo.png","pages/Post.js","components/NewPost.js","pages/Home.js","index.js","components/Feed.js","data/Post.js","components/FollowButton.js","data/Account.js","components/Account.js","components/Post.js"],"names":["NearConfig","window","location","hostname","networkId","nodeUrl","archivalNodeUrl","contractName","walletUrl","App","props","_near","blockViewCall","blockId","methodName","args","account","validateArgs","connection","lastBlockHeight","archivalConnection","provider","query","request_type","block_id","account_id","method_name","args_base64","Buffer","JSON","stringify","toString","result","length","parse","from","state","connected","isNavCollapsed","newPosts","_initNear","then","setState","signedIn","accountId","signedAccountId","a","keyStore","nearAPI","BrowserLocalStorageKeyStore","Object","assign","deps","near","this","fromConfig","type","url","signer","walletConnection","getAccountId","block","finality","header","height","contract","viewMethods","changeMethods","storage_minimum_balance","storageMinimumBalance","accounts","getAccount","Promise","resolve","AccountData","load","posts","getPost","blockHeight","key","PostData","accountData","fetchFollowings","followings","enoughStorageBalance","stats","e","preventDefault","requestSignIn","signOut","_accountId","storage_deposit","passProps","updateState","s","className","onClick","requestStorageBalance","logOut","role","aria-hidden","href","title","src","NearVodkaLogo","alt","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","data-ribbon","basename","process","exact","path","React","Component","AccountPage","useParams","useState","seed","setSeed","setAccount","useEffect","lastPostHeight","module","exports","PostPage","post","setPost","parseInt","NewPost","body","setBody","loading","setLoading","_body","convertPost","placeholder","rows","value","onChange","target","disabled","HomePage","followingSeed","setFollowingSeed","latestSeed","setLatestSeed","entries","map","push","get_num_accounts","numAccounts","get_accounts","from_index","Math","max","limit","accountStats","convertAccountStats","fetchRandomFeed","Feed","extraPosts","ReactDOM","render","document","getElementById","setPosts","recent","SortedSet","pop","console","log","fetchPosts","feed","time","Date","parseFloat","block_height","last_post_height","requestBlockHeight","_ready","fetch","FollowButton","follow","unfollow","MinEnoughStorageBalance","BN","numPosts","num_posts","numFollowers","num_followers","numFollowing","num_following","followers","storage_balance_of","storageBalance","storageTotal","total","storageAvailable","available","get_account","all","_fetchStorageBalance","_fetchAccountStats","promises","i","get_following","flat","forEach","Account","data-tip","data-for","to","delayHide","delayShow","effect","Post","datetime"],"mappings":"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","file":"static/js/main.96874e74.chunk.js","sourcesContent":["import React from 'react';\nimport \"error-polyfill\";\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.scss\";\nimport './gh-fork-ribbon.css';\nimport HomePage from \"./pages/Home\"\nimport AccountPage from \"./pages/Account\"\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'\nimport * as nearAPI from 'near-api-js'\nimport {AccountData} from \"./data/Account\";\nimport NearVodkaLogo from \"./images/near_vodka_logo.png\"\nimport PostPage from \"./pages/Post\";\nimport {PostData} from \"./data/Post\";\n\n// 4 epochs\nconst NumBlocksNonArchival = 4 * 12 * 3600;\n\nconst IsMainnet = window.location.hostname === \"near.vodka\";\nconst TestNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  archivalNodeUrl: 'https://rpc.testnet.internal.near.org',\n  contractName: 'dev-1613368835598-7014445',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\n\nconst MainNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  archivalNodeUrl: 'https://rpc.testnet.internal.near.org',\n  contractName: 'dev-1613368835598-7014445',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\n\n// const MainNearConfig = {\n//   networkId: 'mainnet',\n//   nodeUrl: 'https://rpc.mainnet.near.org',\n//   contractName: 'berryclub.ek.near',\n//   walletUrl: 'https://wallet.near.org',\n// };\nconst NearConfig = IsMainnet ? MainNearConfig : TestNearConfig;\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._near = {\n      async blockViewCall(blockId, methodName, args) {\n        args = args || {};\n        this.account.validateArgs(args);\n        const connection = blockId + NumBlocksNonArchival < this.lastBlockHeight ?\n          this.archivalConnection :\n          this.account.connection;\n        const result = await connection.provider.query({\n          request_type: 'call_function',\n          block_id: blockId,\n          account_id: NearConfig.contractName,\n          method_name: methodName,\n          args_base64: new Buffer(JSON.stringify(args), 'utf8').toString('base64'),\n        });\n        return result.result && result.result.length > 0 && JSON.parse(Buffer.from(result.result).toString());\n      }\n    };\n\n    this.state = {\n      connected: false,\n      isNavCollapsed: true,\n      newPosts: [],\n    };\n\n    this._initNear().then(() => {\n      this.setState({\n        signedIn: !!this._near.accountId,\n        signedAccountId: this._near.accountId,\n        connected: true,\n      });\n    });\n  }\n\n\n  async _initNear() {\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n    const near = await nearAPI.connect(Object.assign({deps: {keyStore}}, NearConfig));\n    this._near.archivalConnection = nearAPI.Connection.fromConfig({\n      networkId: NearConfig.networkId,\n      provider: { type: 'JsonRpcProvider', args: { url: NearConfig.archivalNodeUrl } },\n      signer: { type: 'InMemorySigner', keyStore }\n    });\n    this._near.keyStore = keyStore;\n    this._near.near = near;\n\n    this._near.walletConnection = new nearAPI.WalletConnection(near, NearConfig.contractName);\n    this._near.accountId = this._near.walletConnection.getAccountId();\n\n    this._near.account = this._near.walletConnection.account();\n    const block = await this._near.account.connection.provider.block({ finality: 'final' });\n    this._near.lastBlockHeight = block.header.height;\n    this._near.contract = new nearAPI.Contract(this._near.account, NearConfig.contractName, {\n      viewMethods: ['get_account', 'get_accounts', 'get_num_accounts', 'get_followers', 'get_following', 'get_post', 'storage_minimum_balance', 'storage_balance_of'],\n      changeMethods: ['storage_deposit', 'storage_withdraw', 'post', 'follow', 'unfollow'],\n    });\n    this._near.storageMinimumBalance = await this._near.contract.storage_minimum_balance();\n\n    this._near.accounts = {};\n    this._near.getAccount = (accountId) => {\n      if (accountId in this._near.accounts) {\n        return this._near.accounts[accountId];\n      }\n      return this._near.accounts[accountId] = Promise.resolve(AccountData.load(this._near, accountId));\n    };\n\n    this._near.posts = {};\n    this._near.getPost = (accountId, blockHeight) => {\n      const key = `${accountId}/${blockHeight}`;\n      if (key in this._near.posts) {\n        return this._near.posts[key];\n      }\n      return this._near.posts[key] = Promise.resolve(PostData.load(this._near, accountId, blockHeight));\n    };\n\n\n    if (this._near.accountId) {\n      this._near.accountData = await this._near.getAccount(this._near.accountId);\n      await this._near.accountData.fetchFollowings();\n      this.setState({\n        followings: Object.assign({}, this._near.accountData.followings),\n        enoughStorageBalance: this._near.accountData.stats.enoughStorageBalance,\n      });\n    }\n  }\n\n\n  async requestSignIn(e) {\n    e.preventDefault();\n    const appTitle = 'NEAR Vodka';\n    await this._near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle\n    )\n    return false;\n  }\n\n  async logOut() {\n    this._near.walletConnection.signOut();\n    this._near.accountId = null;\n    this.setState({\n      signedIn: !!this._accountId,\n      signedAccountId: this._accountId,\n    })\n  }\n\n  async requestStorageBalance(e) {\n    e.preventDefault();\n    await this._near.contract.storage_deposit({}, \"30000000000000\", \"100000000000000000000000\");\n  }\n\n  render() {\n    const passProps = {\n      _near: this._near,\n      updateState: (s) => this.setState(s),\n      ...this.state\n    };\n    const header = !this.state.connected ? (\n      <div>Connecting... <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span></div>\n    ) : (this.state.signedIn ? (\n      <div>\n        {!this.state.enoughStorageBalance && (\n          <button\n            className=\"btn btn-primary me-md-2\"\n            onClick={(e) => this.requestStorageBalance(e)}>Add storage balance</button>\n        )}\n        <button\n          className=\"btn btn-outline-secondary\"\n          onClick={() => this.logOut()}>Log out ({this.state.signedAccountId})</button>\n      </div>\n    ) : (\n      <div>\n        <button\n          className=\"btn btn-primary\"\n          onClick={(e) => this.requestSignIn(e)}>Log in with NEAR Wallet</button>\n      </div>\n    ));\n\n    return (\n      <div className=\"App\">\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light mb-3\">\n          <div className=\"container-fluid\">\n            <a className=\"navbar-brand\" href=\"/\" title=\"NEAR Vodka - connecting people\">\n              <img src={NearVodkaLogo} alt=\"NEAR Vodka\" className=\"d-inline-block align-middle\" />\n              [TESTNET] NEAR Vodka\n            </a>\n            <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n                    data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                    aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n              <span className=\"navbar-toggler-icon\"></span>\n            </button>\n            <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n              <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                <li className=\"nav-item\">\n                  {/*<a className=\"nav-link active\" aria-current=\"page\" href=\"/\">Home</a>*/}\n                </li>\n              </ul>\n              <form className=\"d-flex\">\n                {header}\n              </form>\n            </div>\n          </div>\n        </nav>\n\n        <a className=\"github-fork-ribbon right-bottom fixed\" href=\"https://github.com/evgenykuzyakov/near-vodka\" data-ribbon=\"Fork me on GitHub\"\n           title=\"Fork me on GitHub\">Fork me on GitHub</a>\n\n        <Router basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Route exact path={\"/\"}>\n              <HomePage {...passProps}/>\n            </Route>\n            <Route exact path={\"/a/:accountId\"}>\n              <AccountPage {...passProps} />\n            </Route>\n            <Route exact path={\"/p/:accountId/:blockHeight\"}>\n              <PostPage {...passProps} />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React, {useEffect, useState} from 'react';\nimport {useParams} from \"react-router\";\nimport Feed from \"../components/Feed\";\nimport FollowButton from \"../components/FollowButton\";\n\nfunction AccountPage(props) {\n  const { accountId } = useParams();\n  const [seed, setSeed] = useState(false);\n\n  const [account, setAccount] = useState(null);\n\n  if (props.connected && props._near) {\n    props._near.getAccount(accountId).then((account) => {\n      setAccount(account);\n    })\n  }\n\n  useEffect(() => {\n    if (props.connected && props._near && account) {\n      setSeed([[account.stats.lastPostHeight, accountId]]);\n    }\n  }, [props.connected, account])\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col col-lg-8 col-xl-6\">\n          <h3>Account @{accountId}</h3>\n          <FollowButton {...props} accountId={accountId} account={account}/>\n          <h3>Posts</h3>\n          {seed ? (\n            <Feed {...props} seed={seed}/>\n          ) : (\n            <div className=\"d-flex justify-content-center\">\n              <div className=\"spinner-grow\" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AccountPage;\n","module.exports = __webpack_public_path__ + \"static/media/near_vodka_logo.f18e89c9.png\";","import React, {useState} from 'react';\nimport {useParams} from \"react-router\";\nimport Post from \"../components/Post\";\n\nfunction PostPage(props) {\n  const { accountId, blockHeight } = useParams();\n  const [post, setPost] = useState(false);\n\n  if (props.connected && props._near) {\n    props._near.getPost(accountId, parseInt(blockHeight)).then((post) => {\n      setPost(post);\n    })\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col col-lg-8 col-xl-6\">\n          {post ? (\n            <Post {...props} post={post}/>\n          ) : (\n            <div className=\"d-flex justify-content-center\">\n              <div className=\"spinner-grow\" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PostPage;\n","import React, {useState} from 'react';\nimport {convertPost} from \"../data/Post\";\n\nfunction NewPost(props) {\n  const [ body, setBody ] = useState(\"\");\n  const [ loading, setLoading ] = useState(false);\n\n  const post = async () => {\n    let _body = body;\n    setLoading(true);\n    setBody(\"\");\n    let newPosts = convertPost(await props._near.contract.post({body: _body}));\n    newPosts.accountId = props.signedAccountId;\n    props.updateState({\n      newPosts: [...props.newPosts, newPosts]\n    })\n    setLoading(false);\n  };\n\n  return (\n    <div>\n      <form>\n        <div className=\"mb-3\">\n          <textarea\n            className=\"form-control\" placeholder={\"New post\"} rows=\"5\" value={body}\n            onChange={(e) => setBody(e.target.value)}\n          />\n        </div>\n        <div className=\"mb-3 d-grid gap-2 d-md-flex justify-content-md-end\">\n          <button className=\"btn btn-primary\" disabled={!body} onClick={post}>\n            {loading ? (\n              <span>\n                <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                <span className=\"visually-hidden\">Loading...</span>\n                {' '}Posting\n              </span>\n            ) : (\n              <span>Post now</span>\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default NewPost;\n","import \"./Home.scss\";\nimport React, {useEffect, useState} from 'react';\nimport NewPost from \"../components/NewPost\";\nimport Feed from \"../components/Feed\";\nimport {convertAccountStats} from \"../data/Account\";\n\nconst FetchLimit = 100;\n\nfunction HomePage(props) {\n  const [followingSeed, setFollowingSeed] = useState(false);\n  const [latestSeed, setLatestSeed] = useState(false);\n\n  const accountData = props._near.accountData;\n  if (accountData && followingSeed === false) {\n    const seed = Object.entries(accountData.followings).map(\n      ([accountId, accountStats]) => [accountStats.lastPostHeight, accountId]\n    );\n    if (accountData.stats.lastPostHeight > 0) {\n      seed.push([accountData.stats.lastPostHeight, accountData.accountId]);\n    }\n    setFollowingSeed(seed);\n  }\n\n  async function fetchRandomFeed() {\n    const numAccounts = await props._near.contract.get_num_accounts();\n    return (await props._near.contract.get_accounts({\n      from_index: Math.max(numAccounts - FetchLimit, 0),\n      limit: FetchLimit\n    })).map(([accountId, accountStats]) => [convertAccountStats(accountStats).lastPostHeight, accountId]);\n  }\n\n  useEffect(() => {\n    if (props.connected && props._near) {\n      fetchRandomFeed().then((seed) => {\n        setLatestSeed(seed);\n      });\n    }\n  }, [props.connected])\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row justify-content-md-center\">\n          <div className=\"col col-lg-8 col-xl-6\">\n            {props.enoughStorageBalance && (\n              <NewPost {...props}/>\n            )}\n            {followingSeed && followingSeed.length > 0 && (\n              <div>\n                <h3>Your Feed</h3>\n                <Feed {...props} seed={followingSeed} extraPosts={props.newPosts}/>\n              </div>\n            )}\n            {latestSeed && latestSeed.length > 0 && (\n              <div>\n                <h3>Random people</h3>\n                <Feed {...props} seed={latestSeed}/>\n              </div>\n            )}\n            {(!followingSeed || !latestSeed) && (\n              <div className=\"d-flex justify-content-center\">\n                <div className=\"spinner-grow\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React, {useEffect, useState} from 'react';\nimport Post from \"./Post\";\nimport { SortedSet } from \"collections/sorted-set\";\n\nfunction Feed(props) {\n  const [posts, setPosts] = useState([]);\n\n  const seed = props.seed;\n  const extraPosts = props.extraPosts || [];\n\n  async function fetchPosts(seed) {\n    const posts = [];\n    const recent = SortedSet(seed);\n    while (recent.length > 0 && posts.length < 10) {\n      const [blockHeight, accountId] = recent.pop();\n      if (blockHeight === 0) {\n        break;\n      }\n\n      const post = await props._near.getPost(accountId, blockHeight);\n      if (post) {\n        if (post.lastPostHeight > 0) {\n          recent.push([post.lastPostHeight, accountId])\n        }\n        console.log(post);\n        posts.push(post);\n        setPosts([...posts]);\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (seed !== false) {\n      fetchPosts(seed);\n    }\n  }, [seed]);\n\n  const feed = [...extraPosts, ...posts].map(post => {\n    const key = `${post.accountId}/${post.blockHeight}`;\n    return <Post key={key} post={post} {...props}/>;\n  });\n  return (\n    <div>\n      {seed !== false ? feed : (\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-grow\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n","const convertPost = (post) => {\n  return {\n    body: post.body,\n    time: new Date(parseFloat(post.time) / 1_000_000),\n    blockHeight: post.block_height,\n    lastPostHeight: post.last_post_height,\n  };\n};\n\nclass PostData {\n  constructor(_near, accountId, requestBlockHeight) {\n    this._near = _near;\n    this.accountId = accountId;\n    this.requestBlockHeight = requestBlockHeight;\n    this._ready = false;\n  }\n\n  static async load(_near, accountId, requestBlockHeight) {\n    let post = new PostData(_near, accountId, requestBlockHeight);\n    await post.fetch();\n    return post;\n  }\n\n\n  async fetch() {\n    const post = await this._near.blockViewCall(this.requestBlockHeight, 'get_post', {account_id: this.accountId});\n    if (post) {\n      Object.assign(this, convertPost(post));\n    }\n    this._ready = true;\n  }\n}\n\nexport {PostData, convertPost};\n","import React from 'react';\nimport './FollowButton.scss';\n\nfunction FollowButton(props) {\n  const accountId = props.accountId;\n  const account = props.account;\n\n  const follow = async () => {\n    if (!props.followings || (accountId in props.followings)) {\n      return;\n    }\n    props._near.accountData.followings[accountId] = account.stats;\n    props.updateState({\n      followings: Object.assign({}, props._near.accountData.followings),\n    })\n    await props._near.contract.follow({account_id: accountId});\n  };\n\n  const unfollow = async () => {\n    if (!props.followings || !(accountId in props.followings)) {\n      return;\n    }\n    delete props._near.accountData.followings[accountId];\n    props.updateState({\n      followings: Object.assign({}, props._near.accountData.followings),\n    })\n    await props._near.contract.unfollow({account_id: accountId});\n  };\n\n  return (\n    <div className=\"follow-button mb-3\">\n      {(!account) ? (\n        <div className=\"spinner-grow\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      ) : (accountId === props.signedAccountId) ? (\n        <div>It's you</div>\n      ) : (props.followings && (accountId in props.followings)) ? (\n        <button className=\"btn btn-primary btn-unfollow\" onClick={unfollow}><span>Following</span></button>\n      ) : (\n        <button className=\"btn btn-outline-primary btn-follow\" onClick={follow}>Follow</button>\n      )}\n    </div>\n  );\n}\n\nexport default FollowButton;\n","import BN from \"bn.js\";\n\nconst MinEnoughStorageBalance = new BN(\"50000000000000000000000\");\nconst FetchLimit = 100;\n\nconst convertAccountStats = (accountStats) => {\n  return {\n    numPosts: accountStats.num_posts,\n    numFollowers: accountStats.num_followers,\n    numFollowing: accountStats.num_following,\n    lastPostHeight: accountStats.last_post_height,\n  };\n};\n\nclass AccountData {\n  constructor(_near, accountId) {\n    this._near = _near;\n    this.accountId = accountId;\n    this.stats = {\n      lastPostHeight: 0,\n      numFollowers: 0,\n      numFollowing: 0,\n      numPosts: 0,\n      enoughStorageBalance: false,\n    };\n    this.followings = false;\n    this.followers = false;\n    this._ready = false;\n  }\n\n  static async load(_near, accountId) {\n    let account = new AccountData(_near, accountId);\n    await account.fetch();\n    return account;\n  }\n\n  async _fetchStorageBalance() {\n    let storageBalance = await this._near.contract.storage_balance_of({account_id: this.accountId});\n    this.stats.storageTotal = new BN(storageBalance.total);\n    this.stats.storageAvailable = new BN(storageBalance.available);\n    this.stats.enoughStorageBalance = this.stats.storageAvailable > MinEnoughStorageBalance;\n  }\n\n  async _fetchAccountStats() {\n    const accountStats = await this._near.contract.get_account({account_id: this.accountId});\n    if (accountStats) {\n      Object.assign(this.stats, convertAccountStats(accountStats));\n    }\n  }\n\n  async fetch() {\n    await Promise.all([this._fetchStorageBalance(), this._fetchAccountStats()]);\n    this._ready = true;\n  }\n\n  async fetchFollowings() {\n    if (this.followings !== false) {\n      return;\n    }\n    const promises = [];\n    for (let i = 0; i < this.stats.numFollowing; i += FetchLimit) {\n      promises.push(this._near.contract.get_following({\n        account_id: this.accountId,\n        from_index: i,\n        limit: FetchLimit,\n      }));\n    }\n    this.followings = {};\n    (await Promise.all(promises)).flat().forEach(([accountId, accountStats]) => {\n      this.followings[accountId] = convertAccountStats(accountStats);\n    });\n  }\n}\n\nexport {AccountData, convertAccountStats};\n","import React, {useState} from 'react';\nimport './Account.scss';\nimport ReactTooltip from \"react-tooltip\";\nimport {Link} from \"react-router-dom\";\nimport FollowButton from \"./FollowButton\";\n\nfunction Account(props) {\n  const [account, setAccount] = useState(null);\n\n  const accountId = props.accountId;\n  if (props.connected && props._near) {\n    props._near.getAccount(accountId).then((account) => {\n      setAccount(account);\n    })\n  }\n\n  return (\n    <div className=\"account\">\n      <Link className=\"account-handle\" data-tip data-for={`rt-${accountId}`} to={`/a/${accountId}`}>@{accountId}</Link>\n      <ReactTooltip id={`rt-${accountId}`} className='account-tooltip' delayHide={100} delayShow={200} effect='solid'>\n        <div>\n          <h5><Link className=\"account-handle\" to={`/a/${accountId}`}>@{accountId}</Link></h5>\n        </div>\n        <FollowButton {...props} accountId={accountId} account={account}/>\n        {account && (\n          <div>\n            <div>Num posts: {account.stats.numPosts}</div>\n            <div>Num followers: {account.stats.numFollowers}</div>\n            <div>Num following: {account.stats.numFollowing}</div>\n          </div>\n        )}\n      </ReactTooltip>\n    </div>\n  );\n}\n\nexport default Account;\n","import React from 'react';\nimport './Post.scss';\nimport Account from \"./Account\";\nimport TimeAgo from \"timeago-react\";\nimport {Link} from \"react-router-dom\";\n\nfunction Post(props) {\n  const post = props.post;\n  return (\n    <div className=\"card mb-3\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title\"><Account {...props} accountId={post.accountId} /></h5>\n        <h6 className=\"card-subtitle mb-2 text-muted\">\n          <Link className=\"post-link\" to={`/p/${post.accountId}/${post.blockHeight}`}><TimeAgo datetime={post.time} /></Link>\n        </h6>\n        <div className=\"card-text\">\n          {post.body}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Post;\n"],"sourceRoot":""}