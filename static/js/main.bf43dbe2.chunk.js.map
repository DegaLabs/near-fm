{"version":3,"sources":["components/FollowTab.js","pages/Account.js","App.js","pages/Home.js","images/near_vodka_logo.png","pages/Post.js","index.js","components/Followers.js","components/FollowButton.js","components/AccountCard.js","components/Post.js","components/Feed.js","components/Account.js","components/NewPost.js","data/Post.js","components/AddStorageButton.js","data/Account.js","pages/Discover.js"],"names":["FollowTab","props","accountId","useState","account","setAccount","follow","setFollow","loading","setLoading","uuid","gkey","showFollowers","hidden","fetchAccount","useCallback","a","_near","getAccount","fetchFollowers","list","followers","fetchFollowings","followings","signedIn","signedAccountId","notFollowing","Object","keys","filter","following","useEffect","connected","then","map","key","className","AccountCard","role","length","AccountPage","useParams","suffix","seed","setSeed","stats","lastPostHeight","id","to","type","aria-controls","aria-selected","NewPost","Feed","Followers","NearConfig","window","location","hostname","networkId","nodeUrl","archivalNodeUrl","contractName","walletUrl","App","blockViewCall","blockId","methodName","args","validateArgs","connection","lastBlockHeight","archivalConnection","provider","query","request_type","block_id","account_id","method_name","args_base64","Buffer","JSON","stringify","toString","result","parse","from","state","isNavCollapsed","newPosts","_initNear","setState","keyStore","nearAPI","BrowserLocalStorageKeyStore","assign","deps","near","this","fromConfig","url","signer","walletConnection","getAccountId","block","finality","header","height","contract","viewMethods","changeMethods","storage_minimum_balance","storageMinimumBalance","accounts","Promise","resolve","AccountData","load","cacheAccount","posts","getPost","blockHeight","PostData","accountData","fetchStorageBalance","enoughStorageBalance","e","preventDefault","requestSignIn","signOut","_accountId","passProps","updateState","s","onClick","logOut","aria-hidden","basename","process","title","src","NearVodkaLogo","alt","data-bs-toggle","data-bs-target","aria-expanded","aria-label","aria-current","href","data-ribbon","exact","path","React","Component","HomePage","followingSeed","setFollowingSeed","entries","push","extraPosts","module","exports","PostPage","post","setPost","parseInt","expanded","ReactDOM","render","document","getElementById","FollowButton","alert","unfollow","disabled","knownFollowers","setKnownFollowers","newFollowing","setNewFollowing","followsYou","setFollowsYou","slice","i","followersAndOthers","followingAndOthers","numPosts","numFollowing","numFollowers","Post","container","useRef","expand","setExpand","overflow","setOverflow","current","scrollHeight","clientHeight","body","datetime","time","ref","plugins","gfm","setPosts","fetchPosts","recent","SortedSet","pop","mounted","feed","Account","setHidden","data-tip","data-for","border","borderColor","delayHide","delayShow","effect","afterShow","afterHide","internalSetBody","setBody","Date","getTime","postNow","_body","convertPost","placeholder","rows","value","onChange","target","parseFloat","block_height","last_post_height","requestBlockHeight","_ready","fetch","AddStorageButton","storage_deposit","MinEnoughStorageBalance","BN","convertAccountStats","accountStats","num_posts","num_followers","num_following","storage_balance_of","storageBalance","storageTotal","total","storageAvailable","available","get_account","followingsFetch","promises","get_following","from_index","limit","all","flat","forEach","followersFetch","get_followers","fetchAccountStats","DiscoverPage","fetchSeed","get_num_accounts","numAccounts","get_accounts","Math","max"],"mappings":"iOAuEeA,MAnEf,SAAmBC,GACjB,IAAMC,EAAYD,EAAMC,UADA,EAEMC,mBAAS,MAFf,mBAEjBC,EAFiB,KAERC,EAFQ,OAGIF,mBAAS,IAHb,mBAGjBG,EAHiB,KAGTC,EAHS,OAIMJ,oBAAS,GAJf,mBAIjBK,EAJiB,KAIRC,EAJQ,OAKTN,mBAASO,OAAjBC,EALiB,oBAOlBC,EAAgBX,EAAMW,cACtBC,EAASZ,EAAMY,OAEfC,EAAeC,sBAAW,sBAAC,kCAAAC,EAAA,sEACXf,EAAMgB,MAAMC,WAAWhB,GADZ,UAC3BE,EAD2B,OAE/BC,EAAWD,IAEPQ,EAJ2B,iCAKvBR,EAAQe,iBALe,OAM7BC,EAAOhB,EAAQiB,UANc,yCAQvBjB,EAAQkB,kBARe,QAS7BF,EAAOhB,EAAQmB,WATc,QAW3BtB,EAAMuB,UAAYvB,EAAMwB,kBAAoBvB,GACxCwB,EAAeC,OAAOC,KAAKR,GAAMS,QAAO,SAAC3B,GAAD,QAAiBA,KAAaD,EAAMsB,eAC5EO,EAAYH,OAAOC,KAAKR,GAAMS,QAAO,SAAC3B,GAAD,OAAgBA,KAAaD,EAAMsB,cAE9EhB,EAAU,GAAD,mBAAKmB,GAAL,YAAsBI,MAE/BvB,EAAUoB,OAAOC,KAAKR,IAjBO,4CAmB9B,CAAClB,EAAWD,EAAMgB,MAAOhB,EAAMsB,WAAYtB,EAAMuB,SAAUvB,EAAMwB,gBAAiBb,IAErFmB,qBAAU,WACJ9B,EAAM+B,YAAcnB,IACtBJ,GAAW,GACXK,IAAemB,MAAK,kBAAMxB,GAAW,SAEtC,CAACP,EAAWD,EAAM+B,UAAWnB,EAAQT,EAASU,EAAcF,IAG/D,IAAMQ,EAAOd,EAAO4B,KAAI,SAAChC,GACvB,IAAMiC,EAAG,UAAMxB,EAAN,cAAgBT,GACzB,OACE,yBAAKiC,IAAKA,EAAKC,UAAU,YACvB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,kBAACC,EAAA,EAAD,iBAAkBpC,EAAlB,CAAyBC,UAAWA,WAO9C,OAAOM,EACH,yBAAK4B,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,gBAGDhB,EAAKmB,OAAS,EACnB,6BACGnB,GAGD,yBAAKgB,UAAU,cAAf,mB,OCmBSI,IA5Ef,SAAqBvC,GAAQ,IAAD,EACIwC,cAAtBvC,EADkB,EAClBA,UAAWwC,EADO,EACPA,OADO,EAEFvC,oBAAS,GAFP,mBAEnBwC,EAFmB,KAEbC,EAFa,KAY1B,OARAb,qBAAU,WACJ9B,EAAM+B,WACR/B,EAAMgB,MAAMC,WAAWhB,GAAW+B,MAAK,SAAC7B,GACtCwC,EAAQ,CAAC,CAACxC,EAAQyC,MAAMC,eAAgB1C,EAAQF,kBAGnD,CAACD,EAAM+B,UAAW/B,EAAMgB,MAAOf,IAGhC,yBAAKkC,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACZnC,EAAM+B,WACL,6BACE,kBAACK,EAAA,EAAD,iBAAiBpC,EAAjB,CAAwBC,UAAWA,KACnC,yBAAKkC,UAAU,SACf,wBAAIA,UAAU,qBAAqBW,GAAG,aAAaT,KAAK,WACtD,wBAAIF,UAAU,WAAWE,KAAK,gBAC5B,kBAAC,IAAD,CAAMU,GAAE,aAAQ9C,GAAakC,UAAS,kBAAcM,EAAqB,GAAZ,WAAkBK,GAAG,YAC1EE,KAAK,SAASC,gBAAc,QAAQC,iBAAgBT,GAASxC,IAAcD,EAAMwB,iBAAmB,QAD5G,WAIF,wBAAIW,UAAU,WAAWE,KAAK,gBAC5B,kBAAC,IAAD,CAAMU,GAAE,aAAQ9C,EAAR,cAA+BkC,UAAS,kBAAwB,cAAXM,EAAyB,UAAY,IAAMK,GAAG,gBACnGT,KAAK,MAAMY,gBAAc,YAAYC,gBAA0B,cAAXT,GAD5D,cAIF,wBAAIN,UAAU,WAAWE,KAAK,gBAC5B,kBAAC,IAAD,CAAMU,GAAE,aAAQ9C,EAAR,cAA+BkC,UAAS,kBAAwB,cAAXM,EAAyB,UAAY,IAAMK,GAAG,gBACnGT,KAAK,MAAMY,gBAAc,YAAYC,gBAA0B,cAAXT,GAD5D,eAKJ,yBAAKN,UAAU,eACVM,EAeY,cAAXA,EACF,6BACE,kBAAC,EAAD,iBAAezC,EAAf,CAAsBW,eAAe,EAAOV,UAAWA,EAAWW,OAAmB,cAAX6B,MAE/D,cAAXA,EACF,6BACE,kBAAC,EAAD,iBAAezC,EAAf,CAAsBW,eAAe,EAAMV,UAAWA,EAAWW,OAAmB,cAAX6B,MAG3E,oCAvBA,6BACGxC,IAAcD,EAAMwB,iBACnB,kBAAC2B,EAAA,EAAYnD,GAEd0C,EACC,kBAACU,EAAA,EAAD,iBAAUpD,EAAV,CAAiB0C,KAAMA,KAEvB,yBAAKP,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,oBAoBlB,yBAAKA,UAAU,gCACZnC,EAAMuB,UAAY,kBAAC8B,EAAA,EAAcrD,Q,8UCpCtCsD,GAvBYC,OAAOC,SAASC,SASX,CACrBC,UAAW,UACXC,QAAS,+BACTC,gBAAiB,wCACjBC,aAAc,4BACdC,UAAW,oCAYPC,E,kDACJ,WAAY/D,GAAQ,IAAD,8BACjB,cAAMA,IAEDgB,MAAQ,CACLgD,cADK,SACSC,EAASC,EAAYC,GAAO,IAAD,iIAC7CA,EAAOA,GAAQ,GACf,EAAKhE,QAAQiE,aAAaD,GACpBE,EAAaJ,EApCE,OAoC+B,EAAKK,gBACvD,EAAKC,mBACL,EAAKpE,QAAQkE,WAL8B,SAMxBA,EAAWG,SAASC,MAAM,CAC7CC,aAAc,gBACdC,SAAUV,EACVW,WAAYtB,EAAWO,aACvBgB,YAAaX,EACbY,YAAa,IAAIC,EAAOC,KAAKC,UAAUd,GAAO,QAAQe,SAAS,YAXpB,cAMvCC,EANuC,yBAatCA,EAAOA,QAAUA,EAAOA,OAAO7C,OAAS,GAAK0C,KAAKI,MAAML,EAAOM,KAAKF,EAAOA,QAAQD,aAb7C,+CAiBjD,EAAKI,MAAQ,CACXvD,WAAW,EACXwD,gBAAgB,EAChBC,SAAU,GACVpE,UAAW,GACXS,UAAW,IAGb,EAAK4D,YAAYzD,MAAK,WACpB,EAAK0D,SAAS,CACZnE,WAAY,EAAKP,MAAMf,UACvBuB,gBAAiB,EAAKR,MAAMf,UAC5B8B,WAAW,OAjCE,E,oFAuCnB,uCAAAhB,EAAA,6DACQ4E,EAAW,IAAIC,YAAkBC,4BADzC,SAEqBD,UAAgBlE,OAAOoE,OAAO,CAACC,KAAM,CAACJ,aAAYrC,IAFvE,cAEQ0C,EAFR,OAGEC,KAAKjF,MAAMuD,mBAAqBqB,aAAmBM,WAAW,CAC5DxC,UAAWJ,EAAWI,UACtBc,SAAU,CAAExB,KAAM,kBAAmBmB,KAAM,CAAEgC,IAAK7C,EAAWM,kBAC7DwC,OAAQ,CAAEpD,KAAM,iBAAkB2C,cAEpCM,KAAKjF,MAAM2E,SAAWA,EACtBM,KAAKjF,MAAMgF,KAAOA,EAElBC,KAAKjF,MAAMqF,iBAAmB,IAAIT,mBAAyBI,EAAM1C,EAAWO,cAC5EoC,KAAKjF,MAAMf,UAAYgG,KAAKjF,MAAMqF,iBAAiBC,eAEnDL,KAAKjF,MAAMb,QAAU8F,KAAKjF,MAAMqF,iBAAiBlG,UAdnD,UAesB8F,KAAKjF,MAAMb,QAAQkE,WAAWG,SAAS+B,MAAM,CAAEC,SAAU,UAf/E,eAeQD,EAfR,OAgBEN,KAAKjF,MAAMsD,gBAAkBiC,EAAME,OAAOC,OAC1CT,KAAKjF,MAAM2F,SAAW,IAAIf,WAAiBK,KAAKjF,MAAMb,QAASmD,EAAWO,aAAc,CACtF+C,YAAa,CAAC,cAAe,eAAgB,mBAAoB,gBAAiB,gBAAiB,WAAY,0BAA2B,sBAC1IC,cAAe,CAAC,kBAAmB,mBAAoB,OAAQ,SAAU,cAnB7E,UAqB2CZ,KAAKjF,MAAM2F,SAASG,0BArB/D,WAqBEb,KAAKjF,MAAM+F,sBArBb,OAuBEd,KAAKjF,MAAMgG,SAAW,GACtBf,KAAKjF,MAAMC,WAAa,SAAChB,GACvB,OAAIA,KAAa,EAAKe,MAAMgG,SACnB,EAAKhG,MAAMgG,SAAS/G,GAEtB,EAAKe,MAAMgG,SAAS/G,GAAagH,QAAQC,QAAQC,IAAYC,KAAK,EAAKpG,MAAOf,KAGvFgG,KAAKjF,MAAMqG,aAAe,SAACpH,EAAWE,GAChCF,KAAa,EAAKe,MAAMgG,WAG5B,EAAKhG,MAAMgG,SAAS/G,GAAagH,QAAQC,QAAQ/G,KAGnD8F,KAAKjF,MAAMsG,MAAQ,GACnBrB,KAAKjF,MAAMuG,QAAU,SAACtH,EAAWuH,GAC/B,IAAMtF,EAAG,UAAMjC,EAAN,YAAmBuH,GAC5B,OAAItF,KAAO,EAAKlB,MAAMsG,MACb,EAAKtG,MAAMsG,MAAMpF,GAEnB,EAAKlB,MAAMsG,MAAMpF,GAAO+E,QAAQC,QAAQO,IAASL,KAAK,EAAKpG,MAAOf,EAAWuH,MAGlFvB,KAAKjF,MAAMf,UA/CjB,kCAgDmCgG,KAAKjF,MAAMC,WAAWgF,KAAKjF,MAAMf,WAhDpE,eAgDIgG,KAAKjF,MAAM0G,YAhDf,iBAiDUzB,KAAKjF,MAAM0G,YAAYC,sBAjDjC,yBAkDU1B,KAAKjF,MAAM0G,YAAYrG,kBAlDjC,QAmDI4E,KAAKP,SAAS,CACZpE,WAAYI,OAAOoE,OAAO,GAAIG,KAAKjF,MAAM0G,YAAYpG,YACrDsG,qBAAsB3B,KAAKjF,MAAM0G,YAAY9E,MAAMgF,uBAErD3B,KAAKjF,MAAM0G,YAAYxG,iBAAiBc,MAAK,WAC3C,EAAK0D,SAAS,CACZtE,UAAWM,OAAOoE,OAAO,GAAI,EAAK9E,MAAM0G,YAAYtG,gBAzD5D,iD,wHAgEA,WAAoByG,GAApB,SAAA9G,EAAA,6DACE8G,EAAEC,iBACe,aAFnB,SAGQ7B,KAAKjF,MAAMqF,iBAAiB0B,cAChCzE,EAAWO,aAFI,cAFnB,iCAOS,GAPT,gD,kHAUA,sBAAA9C,EAAA,sDACEkF,KAAKjF,MAAMqF,iBAAiB2B,UAC5B/B,KAAKjF,MAAMf,UAAY,KACvBgG,KAAKP,SAAS,CACZnE,WAAY0E,KAAKgC,WACjBzG,gBAAiByE,KAAKgC,aAL1B,gD,0EASA,WAAU,IAAD,OACDC,EAAS,aACblH,MAAOiF,KAAKjF,MACZmH,YAAa,SAACC,GAAD,OAAO,EAAK1C,SAAS0C,KAC/BnC,KAAKX,OAEJmB,EAAUR,KAAKX,MAAMvD,UAEtBkE,KAAKX,MAAM/D,SACd,6BACE,kBAAC,IAAqB2G,GACtB,4BACE/F,UAAU,4BACVkG,QAAS,kBAAM,EAAKC,WAFtB,aAE2CrC,KAAKX,MAAM9D,gBAFtD,MAKF,6BACE,4BACEW,UAAU,kBACVkG,QAAS,SAACR,GAAD,OAAO,EAAKE,cAAcF,KAFrC,6BAVF,8CAAmB,0BAAM1F,UAAU,+BAA+BE,KAAK,SAASkG,cAAY,UAgB9F,OACE,yBAAKpG,UAAU,OACb,kBAAC,IAAD,CAAQqG,SAAUC,IAChB,yBAAKtG,UAAU,sDACb,yBAAKA,UAAU,mBACb,kBAAC,IAAD,CAAMA,UAAU,eAAeY,GAAG,IAAI2F,MAAM,kCAC1C,yBAAKC,IAAKC,IAAeC,IAAI,aAAa1G,UAAU,gCADtD,wBAIA,4BAAQA,UAAU,iBAAiBa,KAAK,SAAS8F,iBAAe,WACxDC,iBAAe,0BAA0B9F,gBAAc,yBACvD+F,gBAAc,QAAQC,aAAW,qBACvC,0BAAM9G,UAAU,yBAElB,yBAAKA,UAAU,2BAA2BW,GAAG,0BAC3C,wBAAIX,UAAU,mCACZ,wBAAIA,UAAU,YACZ,kBAAC,IAAD,CAAMA,UAAU,WAAW+G,eAAa,OAAOnG,GAAG,KAAlD,SAEDkD,KAAKX,MAAM/D,UACV,wBAAIY,UAAU,YACZ,kBAAC,IAAD,CAAMA,UAAU,WAAW+G,eAAa,OAAOnG,GAAG,aAAlD,aAGHkD,KAAKX,MAAM/D,UACV,wBAAIY,UAAU,YACZ,kBAAC,IAAD,CAAMA,UAAU,WAAW+G,eAAa,OAClCnG,GAAE,aAAQkD,KAAKX,MAAM9D,kBAD3B,aAKN,0BAAMW,UAAU,UACbsE,MAMT,uBAAGtE,UAAU,wCAAwCgH,KAAK,+CAA+CC,cAAY,oBAClHV,MAAM,qBADT,qBAGA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOW,OAAK,EAACC,KAAM,KAChBrD,KAAKX,MAAM/D,SACV,kBAAC,IAAa2G,GAEd,kBAAC,IAAiBA,IAGtB,kBAAC,IAAD,CAAOmB,OAAK,EAACC,KAAM,aACjB,kBAAC,IAAiBpB,IAEpB,kBAAC,IAAD,CAAOmB,OAAK,EAACC,KAAM,iBACjB,kBAAC,IAAgBpB,IAEnB,kBAAC,IAAD,CAAOoB,KAAM,yBACX,kBAAC,IAAgBpB,IAEnB,kBAAC,IAAD,CAAOmB,OAAK,EAACC,KAAM,8BACjB,kBAAC,IAAapB,W,GA7MVqB,IAAMC,WAsNTzF,Q,6HCtMA0F,IAvDf,SAAkBzJ,GAAQ,IAAD,EACmBE,oBAAS,GAD5B,mBAChBwJ,EADgB,KACDC,EADC,KAoBvB,OAjBA7H,qBAAU,WACR,GAAI9B,EAAM+B,UAAW,CACnB,IAAM2F,EAAc1H,EAAMgB,MAAM0G,YAChC,GAAIA,EAAa,CACf,IAAMhF,EAAOhB,OAAOkI,QAAQ5J,EAAMsB,YAAYW,KAC5C,mCAAEhC,EAAF,WAA0B,CAA1B,KAAmC2C,MAAMC,eAAgB5C,MAEvDyH,EAAY9E,MAAMC,eAAiB,GACrCH,EAAKmH,KAAK,CAACnC,EAAY9E,MAAMC,eAAgB6E,EAAYzH,YAE3D0J,EAAiBjH,QAEjBiH,EAAiB,OAGpB,CAAC3J,EAAM+B,UAAW/B,EAAMsB,WAAYtB,EAAMgB,MAAM0G,cAGjD,6BACE,yBAAKvF,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACb,kBAAC,IAAYnC,GACX0J,GAAiBA,EAAcpH,OAAS,EACxC,6BACE,yCACA,kBAAC,IAAD,iBAAUtC,EAAV,CAAiB0C,KAAMgH,EAAeI,WAAY9J,EAAMwF,aAExDkE,EACF,6BACE,6CACA,6BACE,kBAAC,IAAD,CAAM3G,GAAI,YAAaZ,UAAU,6BAAjC,mBAIJ,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,iBAKR,yBAAKA,UAAU,gCACZnC,EAAMuB,UAAY,kBAAC,IAAcvB,S,oBCtD9C+J,EAAOC,QAAU,IAA0B,6C,mFCqC5BC,IAhCf,SAAkBjK,GAAQ,IAAD,EACYwC,cAA3BvC,EADe,EACfA,UAAWuH,EADI,EACJA,YADI,EAECtH,oBAAS,GAFV,mBAEhBgK,EAFgB,KAEVC,EAFU,KAUvB,OANInK,EAAM+B,WAAa/B,EAAMgB,OAC3BhB,EAAMgB,MAAMuG,QAAQtH,EAAWmK,SAAS5C,IAAcxF,MAAK,SAACkI,GAC1DC,EAAQD,MAKV,yBAAK/H,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACZ+H,EACC,kBAAC,IAAD,iBAAUlK,EAAV,CAAiBkK,KAAMA,EAAMG,UAAU,KAEvC,yBAAKlI,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,iBAKR,yBAAKA,UAAU,gCACZnC,EAAMuB,UAAY,kBAAC,IAAcvB,Q,uEC9B5C,+DAKAsK,IAASC,OAAO,kBAAC,IAAD,MAASC,SAASC,eAAe,U,wHCLjD,qCAoCepH,IAhCf,SAAmBrD,GACjB,IAEMoB,EAFeM,OAAOC,KAAK3B,EAAMoB,WAAWQ,QAAO,SAAC3B,GAAD,QAAiBA,KAAaD,EAAMsB,eAE9DW,KAAI,SAAChC,GAClC,IAAMiC,EAAG,YAAQjC,GACjB,OACE,yBAAKiC,IAAKA,EAAKC,UAAU,YACvB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,kBAAC,IAAD,eAAalC,UAAWA,GAAeD,UAOjD,OAAQA,EAAM+B,UAMTX,EAAUkB,OAAS,EACtB,6BACE,2CACClB,GAGH,8BAXA,yBAAKe,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,kB,yGCmCOuI,MAvDf,SAAsB1K,GACpB,IAAMC,EAAYD,EAAMC,UAClBE,EAAUH,EAAMG,QAFK,4CAI3B,sBAAAY,EAAA,yDACOf,EAAM4H,qBADb,uBAEI+C,MAAM,iCAFV,6BAKO3K,EAAMsB,cAAerB,KAAaD,EAAMsB,YAL/C,wDAQEtB,EAAMgB,MAAM0G,YAAYpG,WAAWrB,GAAaE,EAChDH,EAAMmI,YAAY,CAChB7G,WAAYI,OAAOoE,OAAO,GAAI9F,EAAMgB,MAAM0G,YAAYpG,cAV1D,SAYQtB,EAAMgB,MAAM2F,SAAStG,OAAO,CAACuE,WAAY3E,IAZjD,4CAJ2B,kEAmB3B,sBAAAc,EAAA,yDACOf,EAAMsB,YAAgBrB,KAAaD,EAAMsB,WADhD,+DAIStB,EAAMgB,MAAM0G,YAAYpG,WAAWrB,GAC1CD,EAAMmI,YAAY,CAChB7G,WAAYI,OAAOoE,OAAO,GAAI9F,EAAMgB,MAAM0G,YAAYpG,cAN1D,SAQQtB,EAAMgB,MAAM2F,SAASiE,SAAS,CAAChG,WAAY3E,IARnD,4CAnB2B,sBA8B3B,OACE,yBAAKkC,UAAU,sBACVhC,EAIEF,IAAcD,EAAMwB,gBACvB,yCACGxB,EAAMsB,YAAerB,KAAaD,EAAMsB,WAC3C,4BAAQa,UAAU,+BAA+BkG,QAvC5B,4CAuC+C,4CACjErI,EAAMuB,SACT,4BACEY,UAAU,qCACVkG,QA3CmB,4CAyCrB,UAKA,4BACElG,UAAU,uCACV0I,UAAU,GAFZ,qBAbA,yBAAK1I,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,iB,yBCgFKC,IA9Gf,SAAqBpC,GAAQ,IAAD,EACIE,mBAAS,MADb,mBACnBC,EADmB,KACVC,EADU,OAEkBF,mBAAS,IAF3B,mBAEnB4K,EAFmB,KAEHC,EAFG,OAGc7K,mBAAS,IAHvB,mBAGnB8K,EAHmB,KAGLC,EAHK,OAII/K,oBAAS,GAJb,mBAInBK,EAJmB,KAIVC,EAJU,OAKUN,oBAAS,GALnB,mBAKnBgL,EALmB,KAKPC,EALO,OAMZjL,mBAASO,OAAhByB,EANmB,oBAQpBtB,EAASZ,EAAMY,OACfX,EAAYD,EAAMC,UAElBY,EAAeC,sBAAW,sBAAC,4BAAAC,EAAA,sEACXf,EAAMgB,MAAMC,WAAWhB,GADZ,OAC3BE,EAD2B,OAE/BC,EAAWD,GACPH,EAAMuB,UAAYvB,EAAMwB,kBAAoBvB,IAC9CkL,EAAclL,KAAaD,EAAMoB,WACjCjB,EAAQe,iBAAiBc,MAAK,WAC5B+I,EAAkBrJ,OAAOC,KAAKxB,EAAQiB,WAAWQ,QAAO,SAAC3B,GAAD,OAAgBA,KAAaD,EAAMsB,kBAE7FnB,EAAQkB,kBAAkBW,MAAK,WAC7BiJ,EAAgBvJ,OAAOC,KAAKxB,EAAQmB,YAAYM,QAAO,SAAC3B,GAAD,QAAiBA,KAAaD,EAAMsB,aAAerB,IAAcD,EAAMwB,wBATnG,2CAY9B,CAACvB,EAAWD,EAAMgB,MAAOhB,EAAMsB,WAAYtB,EAAMuB,SAAUvB,EAAMwB,gBAAiBxB,EAAMoB,YAE3FU,qBAAU,YACJ9B,EAAM+B,WAAcnB,GAAYT,GAAWA,EAAQF,YAAcA,IACnEO,GAAW,GACXK,IAAemB,MAAK,kBAAMxB,GAAW,SAEtC,CAACR,EAAM+B,UAAW9B,EAAWW,EAAQT,EAASU,IAEjD,IAAMO,EAAY0J,EAAeM,MAAM,EAA8B,IAA1BN,EAAexI,OAAgB,EAAI,GAAGL,KAC/E,SAAChC,EAAWoL,GAAZ,OACE,0BAAMnJ,IAAG,YAAOA,EAAP,YAAcjC,IACpBoL,EAAI,GAAK,KACV,kBAAC,IAAD,iBAAarL,EAAb,CAAoBC,UAAWA,SAK/BqL,EAAqBR,EAAexI,OAASlB,EAAUkB,OAEvDT,EAAYmJ,EAAaI,MAAM,EAA4B,IAAxBJ,EAAa1I,OAAgB,EAAI,GAAGL,KAC3E,SAAChC,EAAWoL,GAAZ,OACE,0BAAMnJ,IAAG,YAAOA,EAAP,YAAcjC,IACpBoL,EAAI,GAAK,KACV,kBAAC,IAAD,iBAAarL,EAAb,CAAoBC,UAAWA,SAK/BsL,EAAqBP,EAAa1I,OAAST,EAAUS,OAE3D,OACE,6BACE,6BACE,4BAAI,kBAAC,IAAD,CAAMH,UAAU,iBAAiBY,GAAE,aAAQ9C,IAA3C,IAA0DA,KAE9DM,EACA,yBAAK4B,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,gBAGFhC,EACF,6BACE,kBAAC,EAAD,iBAAkBH,EAAlB,CAAyBC,UAAWA,EAAWE,QAASA,KACxD,yBAAKgC,UAAU,QACb,6BACE,0BAAMA,UAAU,WACbhC,EAAQyC,MAAM4I,SAAW,2BAAIrL,EAAQyC,MAAM4I,UAAgB,0BAAMrJ,UAAU,cAAhB,MAD9D,IACsG,0BAAMA,UAAU,cAAhB,OAA6D,IAA3BhC,EAAQyC,MAAM4I,UAAkB,MAEvKN,GAAc,0BAAM/I,UAAU,sBAAhB,gBAEjB,6BACE,kBAAC,IAAD,CAAMY,GAAE,aAAQ9C,EAAR,cAA+BkC,UAAU,uBAC/C,0BAAMA,UAAU,WAAU,2BAAIhC,EAAQyC,MAAM6I,cAA5C,IAA8D,0BAAMtJ,UAAU,cAAhB,eAEhE,kBAAC,IAAD,CAAMY,GAAE,aAAQ9C,EAAR,cAA+BkC,UAAU,uBAC/C,8BAAM,2BAAIhC,EAAQyC,MAAM8I,cAAxB,IAA0C,0BAAMvJ,UAAU,cAAhB,iBAI/CnC,EAAMuB,UAAYtB,IAAcD,EAAMwB,iBACrC,6BACE,yBAAKW,UAAU,cACXf,EAAUkB,OAAS,EACnB,4CACelB,EADf,IAC2BkK,EAAkB,eAAWA,EAAX,sBAAoD,IAGjG,mCAGFzJ,EAAUS,OAAS,GACnB,yBAAKH,UAAU,cAAf,WACWN,EADX,IACuB0J,EAAkB,eAAWA,EAAX,4BAA0D,MAO3G,yD,sOCxDOI,IA/Cf,SAAc3L,GACZ,IAAM4L,EAAYC,iBAAO,MADN,EAES3L,oBAAS,GAFlB,mBAEZ4L,EAFY,KAEJC,EAFI,OAGa7L,oBAAS,GAHtB,mBAGZ8L,EAHY,KAGFC,EAHE,KAIb/B,EAAOlK,EAAMkK,KAEnBpI,qBAAU,WACR,GAAI8J,GAAaA,EAAUM,QAAS,CAAC,IAAD,EACGN,EAAUM,QAAxCC,EAD2B,EAC3BA,aAAcC,EADa,EACbA,aACrBH,EAAYE,EAAeC,MAE5B,CAACN,EAAQF,EAAW1B,EAAKmC,OAE5B,IAAMhC,EAAWrK,EAAMqK,UAAYyB,EAEnC,OACE,yBAAK3J,UAAU,aACb,yBAAKA,UAAU,aACb,wBAAIA,UAAU,cAAa,kBAAC,IAAD,iBAAanC,EAAb,CAAoBC,UAAWiK,EAAKjK,cAC/D,wBAAIkC,UAAU,iCACZ,kBAAC,IAAD,CAAMA,UAAU,YAAYY,GAAE,aAAQmH,EAAKjK,UAAb,YAA0BiK,EAAK1C,cAAe,kBAAC,IAAD,CAAS8E,SAAUpC,EAAKqC,SAEtG,6BACE,yBAAKpK,UAAS,6BAAyBkI,EAAoC,GAAzB,wBAApC,OAAkE2B,EAAW,sBAAwB,IAAMQ,IAAKZ,GAC5H,kBAAC,IAAD,CAAea,QAAS,CAACC,MAAOxC,EAAKmC,OAEtCP,EACC,yBAAK3J,UAAU,QACb,4BACEA,UAAU,4BACVkG,QAAS,kBAAM0D,GAAU,KAF3B,cAKAC,GACF,yBAAK7J,UAAU,QACb,4BACEA,UAAU,4BACVkG,QAAS,kBAAM0D,GAAU,KAF3B,mB,4HC+BC3I,IArEf,SAAcpD,GAAQ,IAAD,EACWE,oBAAS,GADpB,mBACZK,EADY,KACHC,EADG,OAEON,mBAAS,IAFhB,mBAEZoH,EAFY,KAELqF,EAFK,OAGJzM,mBAASO,OAAjBC,EAHY,oBAKbgC,EAAO1C,EAAM0C,KACboH,EAAa9J,EAAM8J,YAAc,GAEjC8C,EAAa9L,sBAAW,uCAAC,WAAOwE,GAAP,2BAAAvE,EAAA,sDACvBuG,EAAQ,GACRuF,EAASC,oBAAUpK,GAFI,YAGtBmK,EAAOvK,OAAS,GAAKgF,EAAMhF,OAAS,IAHd,sBAIMuK,EAAOE,MAJb,mBAIpBvF,EAJoB,KAIPvH,EAJO,KAKP,IAAhBuH,EALuB,mEASRxH,EAAMgB,MAAMuG,QAAQtH,EAAWuH,GATvB,YASrB0C,EATqB,4BAWrBA,EAAKrH,eAAiB,GACxBgK,EAAOhD,KAAK,CAACK,EAAKrH,eAAgB5C,IAEpCqH,EAAMuC,KAAKK,IACP5E,EAAM0H,QAfe,iBAgBvBL,EAAS,GAAD,OAAKrF,IAhBU,uHAAD,sDAsB3B,CAAC5E,EAAM1C,EAAMgB,QAEhBc,qBAAU,WACR,IAAIwD,EAAQ,CACV0H,SAAS,GAQX,OANAxM,GAAW,GACXoM,EAAWtH,GAAOtD,MAAK,WACjBsD,EAAM0H,SACRxM,GAAW,MAGR,WACL8E,EAAM0H,SAAU,KAEjB,CAACtK,EAAMkK,IAEV,IAAMK,EAAO,sBAAInD,GAAJ,YAAmBxC,IAAOrF,KAAI,SAAAiI,GACzC,IAAMhI,EAAG,UAAMxB,EAAN,YAAcwJ,EAAKjK,UAAnB,YAAgCiK,EAAK1C,aAC9C,OAAO,kBAAC,IAAD,iBAAUxH,EAAV,CAAiBkC,IAAKA,EAAKgI,KAAMA,QAE1C,OACE,6BACI+C,EAAK3K,OAAS,EAAK2K,GAAQ1M,GAC3B,yBAAK4B,UAAU,cAAf,aAID5B,GACC,yBAAK4B,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,mB,6GChCG+K,IA3Bf,SAAiBlN,GAAQ,IAAD,EACME,oBAAS,GADf,mBACfU,EADe,KACPuM,EADO,OAERjN,mBAASO,OAAhByB,EAFe,oBAGhBjC,EAAYD,EAAMC,UAExB,OACE,yBAAKkC,UAAU,WACb,kBAAC,IAAD,CAAMA,UAAU,iBAAiBiL,YAAA,EAASC,WAAUnL,EAAKa,GAAE,aAAQ9C,IAAnE,IAAkFA,GAClF,kBAAC,IAAD,CACE6C,GAAIZ,EACJc,KAAK,QACLsK,QAAQ,EACRC,YAAY,qBACZpL,UAAU,kBACVqL,UAAW,IACXC,UAAW,IACXC,OAAO,QACPC,UAAW,kBAAMR,GAAU,IAC3BS,UAAW,kBAAMT,GAAU,KAE3B,kBAAC,IAAD,iBAAiBnN,EAAjB,CAAwBC,UAAWA,EAAWW,OAAQA,S,kHCmD/CuC,IAzEf,SAAiBnD,GAAQ,IAAD,EACYE,mBAAS,IADrB,mBACdmM,EADc,KACRwB,EADQ,OAEI3N,mBAAS,MAFb,mBAEdgK,EAFc,KAERC,EAFQ,OAGUjK,oBAAS,GAHnB,mBAGdK,EAHc,KAGLC,EAHK,KAKtB,SAASsN,EAAQzB,GACflC,EAAQkC,EAAO,CACbpM,UAAWD,EAAMwB,gBACjBgG,YAAa,EACb+E,KAA6B,KAAvB,IAAIwB,MAAOC,UACjB3B,QACE,MAEJwB,EAAgBxB,GAGlB,IAAM4B,EAAO,uCAAG,8BAAAlN,EAAA,6DACVmN,EAAQ7B,EACZ7L,GAAW,GACXsN,EAAQ,IAHM,KAICK,IAJD,SAImBnO,EAAMgB,MAAM2F,SAASuD,KAAK,CAACmC,KAAM6B,IAJpD,oBAIV1I,GAJU,eAKLvF,UAAYD,EAAMwB,gBAC3BxB,EAAMmI,YAAY,CAChB3C,SAAS,GAAD,mBAAMxF,EAAMwF,UAAZ,CAAsBA,MAEhChF,GAAW,GATG,4CAAH,qDAYb,OAAOR,EAAM4H,qBACX,6BACE,8BACE,yBAAKzF,UAAU,QACb,8BACEA,UAAU,eAAeiM,YAAa,+BAAgCC,KAAK,IAAIC,MAAOjC,EACtFkC,SAAU,SAAC1G,GAAD,OAAOiG,EAAQjG,EAAE2G,OAAOF,WAGtC,yBAAKnM,UAAU,sDACb,4BAAQA,UAAU,kBAAkB0I,UAAWwB,EAAMhE,QAAS4F,GAC3D1N,EACC,8BACE,0BAAM4B,UAAU,+BAA+BE,KAAK,SAASkG,cAAY,SACzE,0BAAMpG,UAAU,mBAAhB,cACC,IAHH,WAMA,4CAIL+H,GACC,yBAAK/H,UAAU,QACb,wBAAIA,UAAU,cAAd,WACA,kBAAC,IAAD,iBAAUnC,EAAV,CAAiBkK,KAAMA,QAM/B,yBAAK/H,UAAU,QACb,6BACE,yBAAKA,UAAU,qBAAqBE,KAAK,SACvC,0DAAkC,6BADpC,8DAKF,6BACE,kBAAC,IAAqBrC,O,+ICxExBmO,EAAc,SAACjE,GACnB,MAAO,CACLmC,KAAMnC,EAAKmC,KACXE,KAAM,IAAIwB,KAAKU,WAAWvE,EAAKqC,MAAQ,KACvC/E,YAAa0C,EAAKwE,aAClB7L,eAAgBqH,EAAKyE,mBAInBlH,E,WACJ,WAAYzG,EAAOf,EAAW2O,GAAqB,oBACjD3I,KAAKjF,MAAQA,EACbiF,KAAKhG,UAAYA,EACjBgG,KAAK2I,mBAAqBA,EAC1B3I,KAAK4I,QAAS,E,gFAUhB,4BAAA9N,EAAA,sEACqBkF,KAAKjF,MAAMgD,cAAciC,KAAK2I,mBAAoB,WAAY,CAAChK,WAAYqB,KAAKhG,YADrG,QACQiK,EADR,SAGIxI,OAAOoE,OAAOG,KAAMkI,EAAYjE,IAElCjE,KAAK4I,QAAS,EALhB,gD,iHAPA,WAAkB7N,EAAOf,EAAW2O,GAApC,8EACM1E,EAAO,IAAIzC,EAASzG,EAAOf,EAAW2O,GAD5C,SAEQ1E,EAAK4E,QAFb,gCAGS5E,GAHT,2C,8ICCa6E,IAhBf,SAA0B/O,GAAO,4CAC/B,WAAqC6H,GAArC,SAAA9G,EAAA,6DACE8G,EAAEC,iBADJ,SAEQ9H,EAAMgB,MAAM2F,SAASqI,gBAAgB,GAAI,iBAAkB,4BAFnE,4CAD+B,sBAM/B,OAAQhP,EAAM4H,sBACZ,4BACEzF,UAAU,0BACVkG,QAT4B,SAAD,oCAO7B,yB,qICPE4G,EAA0B,IAAIC,IAAG,2BAGjCC,EAAsB,SAACC,GAC3B,MAAO,CACL5D,SAAU4D,EAAaC,UACvB3D,aAAc0D,EAAaE,cAC3B7D,aAAc2D,EAAaG,cAC3B1M,eAAgBuM,EAAaT,mBAI3BxH,E,WACJ,WAAYnG,EAAOf,EAAWmP,GAAe,oBAC3CnJ,KAAKjF,MAAQA,EACbiF,KAAKhG,UAAYA,EACjBgG,KAAKrD,MAAQ,CACXC,eAAgB,EAChB6I,aAAc,EACdD,aAAc,EACdD,SAAU,EACV5D,sBAAsB,GAEpBwH,GACF1N,OAAOoE,OAAOG,KAAKrD,MAAOuM,EAAoBC,IAC9CnJ,KAAK4I,QAAS,GAEd5I,KAAK4I,QAAS,EAEhB5I,KAAK3E,YAAa,EAClB2E,KAAK7E,WAAY,EACjB6E,KAAKjF,MAAMqG,aAAapH,EAAWgG,M,8FASrC,4BAAAlF,EAAA,sEAC6BkF,KAAKjF,MAAM2F,SAAS6I,mBAAmB,CAAC5K,WAAYqB,KAAKhG,YADtF,OACMwP,EADN,OAEExJ,KAAKrD,MAAM8M,aAAe,IAAIR,IAAGO,EAAeE,OAChD1J,KAAKrD,MAAMgN,iBAAmB,IAAIV,IAAGO,EAAeI,WACpD5J,KAAKrD,MAAMgF,qBAAuB3B,KAAKrD,MAAMgN,iBAAmBX,EAJlE,gD,4HAOA,4BAAAlO,EAAA,sEAC6BkF,KAAKjF,MAAM2F,SAASmJ,YAAY,CAAClL,WAAYqB,KAAKhG,YAD/E,QACQmP,EADR,UAGI1N,OAAOoE,OAAOG,KAAKrD,MAAOuM,EAAoBC,IAC9CnJ,KAAK4I,QAAS,GAJlB,gD,0HAQA,qCAAA9N,EAAA,0DAC0B,IAApBkF,KAAK3E,WADX,gCAEU2E,KAAK8J,gBAFf,wCAME,IADMC,EAAW,GACR3E,EAAI,EAAGA,EAAIpF,KAAKrD,MAAM6I,aAAcJ,GA5D9B,IA6Db2E,EAASnG,KAAK5D,KAAKjF,MAAM2F,SAASsJ,cAAc,CAC9CrL,WAAYqB,KAAKhG,UACjBiQ,WAAY7E,EACZ8E,MAhEW,OAsDjB,OAaElK,KAAK3E,WAAa,GAClB2E,KAAK8J,gBAAkB,IAAI9I,QAAJ,uCAAY,WAAOC,GAAP,SAAAnG,EAAA,sEAC1BkG,QAAQmJ,IAAIJ,GADc,cACHK,OAAOC,SAAQ,YAAgC,IAAD,mBAA7BrQ,EAA6B,KAAlBmP,EAAkB,KAC1E,EAAK9N,WAAWrB,GAAa,IAAIkH,EAAY,EAAKnG,MAAOf,EAAWmP,MAEtElI,IAJiC,2CAAZ,uDAdzB,UAoBQjB,KAAK8J,gBApBb,iD,yHAuBA,qCAAAhP,EAAA,0DACyB,IAAnBkF,KAAK7E,UADX,gCAEU6E,KAAKsK,eAFf,wCAME,IADMP,EAAW,GACR3E,EAAI,EAAGA,EAAIpF,KAAKrD,MAAM8I,aAAcL,GAnF9B,IAoFb2E,EAASnG,KAAK5D,KAAKjF,MAAM2F,SAAS6J,cAAc,CAC9C5L,WAAYqB,KAAKhG,UACjBiQ,WAAY7E,EACZ8E,MAvFW,OA6EjB,OAaElK,KAAK7E,UAAY,GACjB6E,KAAKsK,eAAiB,IAAItJ,QAAJ,uCAAY,WAAOC,GAAP,SAAAnG,EAAA,sEACzBkG,QAAQmJ,IAAIJ,GADa,cACFK,OAAOC,SAAQ,YAAgC,IAAD,mBAA7BrQ,EAA6B,KAAlBmP,EAAkB,KAC1E,EAAKhO,UAAUnB,GAAa,IAAIkH,EAAY,EAAKnG,MAAOf,EAAWmP,MAErElI,IAJgC,2CAAZ,uDAdxB,UAoBQjB,KAAKsK,eApBb,iD,iHA5CA,WAAkBvP,EAAOf,GAAzB,8EACME,EAAU,IAAIgH,EAAYnG,EAAOf,GADvC,SAEQE,EAAQsQ,oBAFhB,gCAGStQ,GAHT,2C,oLCuBauQ,IAnDf,SAAsB1Q,GAAQ,IAAD,EACHE,oBAAS,GADN,mBACpBwC,EADoB,KACdC,EADc,KAGrBgO,EAAY7P,sBAAW,sBAAC,4BAAAC,EAAA,0DACxBf,EAAM+B,UADkB,gCAEA/B,EAAMgB,MAAM2F,SAASiK,mBAFrB,cAEpBC,EAFoB,gBAGZ7Q,EAAMgB,MAAM2F,SAASmK,aAAa,CAC9CZ,WAAYa,KAAKC,IAAIH,EATV,IASoC,GAC/CV,MAVW,MAKa,uCAMtBlO,KAAI,YAAgC,IAAD,mBAA7BhC,EAA6B,KAAlBmP,EAAkB,KAErC,MAAO,CADO,IAAIjI,IAAYnH,EAAMgB,MAAOf,EAAWmP,GACtCxM,MAAMC,eAAgB5C,OARd,iCAWnB,GAXmB,4CAa3B,CAACD,EAAM+B,UAAW/B,EAAMgB,QAO3B,OALAc,qBAAU,WACR6O,IAAY3O,KAAKW,KAChB,CAACgO,IAIF,6BACE,yBAAKxO,UAAU,aACb,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,gCACZO,GAAQA,EAAKJ,OAAS,GACrB,6BACE,wCACA,kBAAC,IAAD,iBAAUtC,EAAV,CAAiB0C,KAAMA,OAGzBA,GACA,yBAAKP,UAAU,iCACb,yBAAKA,UAAU,eAAeE,KAAK,UACjC,0BAAMF,UAAU,mBAAhB,iBAKR,yBAAKA,UAAU,gCACZnC,EAAMuB,UAAY,kBAAC,IAAcvB,U","file":"static/js/main.bf43dbe2.chunk.js","sourcesContent":["import React, {useCallback, useEffect, useState} from 'react';\nimport uuid from \"react-uuid\";\nimport AccountCard from \"./AccountCard\";\n\nfunction FollowTab(props) {\n  const accountId = props.accountId;\n  const [account, setAccount] = useState(null);\n  const [follow, setFollow] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [gkey] = useState(uuid());\n\n  const showFollowers = props.showFollowers;\n  const hidden = props.hidden;\n\n  const fetchAccount = useCallback(async () => {\n    let account = await props._near.getAccount(accountId);\n    setAccount(account);\n    let list;\n    if (showFollowers) {\n      await account.fetchFollowers();\n      list = account.followers;\n    } else {\n      await account.fetchFollowings();\n      list = account.followings;\n    }\n    if (props.signedIn && props.signedAccountId !== accountId) {\n      const notFollowing = Object.keys(list).filter((accountId) => !(accountId in props.followings));\n      const following = Object.keys(list).filter((accountId) => (accountId in props.followings));\n\n      setFollow([...notFollowing, ...following]);\n    } else {\n      setFollow(Object.keys(list));\n    }\n  }, [accountId, props._near, props.followings, props.signedIn, props.signedAccountId, showFollowers])\n\n  useEffect(() => {\n    if (props.connected && !hidden) {\n      setLoading(true);\n      fetchAccount().then(() => setLoading(false))\n    }\n  }, [accountId, props.connected, hidden, account, fetchAccount, showFollowers]);\n\n\n  const list = follow.map((accountId) => {\n    const key = `${gkey}-f/${accountId}`;\n    return (\n      <div key={key} className=\"follower\">\n        <div className=\"card mb-3\">\n          <div className=\"card-body\">\n            <AccountCard  {...props} accountId={accountId}/>\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  return loading ? (\n      <div className=\"d-flex justify-content-center\">\n        <div className=\"spinner-grow\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    ) : (list.length > 0) ? (\n    <div>\n      {list}\n    </div>\n    ) : (\n      <div className=\"text-muted\">No one is here</div>\n    );\n}\n\nexport default FollowTab;\n","import React, {useEffect, useState} from 'react';\nimport './Account.scss';\nimport {useParams} from \"react-router\";\nimport Feed from \"../components/Feed\";\nimport Followers from \"../components/Followers\";\nimport NewPost from \"../components/NewPost\";\nimport AccountCard from \"../components/AccountCard\";\nimport FollowTab from \"../components/FollowTab\";\nimport {Link} from \"react-router-dom\";\n\nfunction AccountPage(props) {\n  const { accountId, suffix } = useParams();\n  const [seed, setSeed] = useState(false);\n\n  useEffect(() => {\n    if (props.connected) {\n      props._near.getAccount(accountId).then((account) => {\n        setSeed([[account.stats.lastPostHeight, account.accountId]]);\n      })\n    }\n  }, [props.connected, props._near, accountId])\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col col-12 col-lg-8 col-xl-6\">\n          {props.connected && (\n            <div>\n              <AccountCard {...props} accountId={accountId} />\n              <div className=\"mb-3\"></div>\n              <ul className=\"nav nav-pills mb-2\" id=\"accountTab\" role=\"tablist\">\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to={`/a/${accountId}`} className={`nav-link${!suffix ? \" active\" : \"\"}`} id=\"posts-tab\"\n                          type=\"button\" aria-controls=\"posts\" aria-selected={!suffix}>{accountId === props.signedAccountId && \"Your \"} Posts\n                  </Link>\n                </li>\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to={`/a/${accountId}/following`} className={`nav-link${suffix === 'following' ? \" active\" : \"\"}`} id=\"following-tab\"\n                          role=\"tab\" aria-controls=\"following\" aria-selected={suffix === 'following'}>Following\n                  </Link>\n                </li>\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to={`/a/${accountId}/followers`} className={`nav-link${suffix === 'followers' ? \" active\" : \"\"}`} id=\"followers-tab\"\n                          role=\"tab\" aria-controls=\"followers\" aria-selected={suffix === 'followers'}>Followers\n                  </Link>\n                </li>\n              </ul>\n              <div className=\"tab-content\">\n                { !suffix ? (\n                  <div>\n                    {accountId === props.signedAccountId && (\n                      <NewPost {...props}/>\n                    )}\n                    {seed ? (\n                      <Feed {...props} seed={seed}/>\n                    ) : (\n                      <div className=\"d-flex justify-content-center\">\n                        <div className=\"spinner-grow\" role=\"status\">\n                          <span className=\"visually-hidden\">Loading...</span>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ) : suffix === 'following' ? (\n                  <div>\n                    <FollowTab {...props} showFollowers={false} accountId={accountId} hidden={suffix !== 'following'}/>\n                  </div>\n                ) : suffix === 'followers' ? (\n                  <div>\n                    <FollowTab {...props} showFollowers={true} accountId={accountId} hidden={suffix !== 'followers'}/>\n                  </div>\n                ) : (\n                  <div>Bug</div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"col col-12 col-lg-4 col-xl-4\">\n          {props.signedIn && <Followers {...props} />}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AccountPage;\n","import React from 'react';\nimport \"error-polyfill\";\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./App.scss\";\nimport './gh-fork-ribbon.css';\nimport HomePage from \"./pages/Home\"\nimport AccountPage from \"./pages/Account\"\nimport {HashRouter as Router, Link, Route, Switch} from 'react-router-dom'\nimport * as nearAPI from 'near-api-js'\nimport {AccountData} from \"./data/Account\";\nimport NearVodkaLogo from \"./images/near_vodka_logo.png\"\nimport PostPage from \"./pages/Post\";\nimport {PostData} from \"./data/Post\";\nimport DiscoverPage from \"./pages/Discover\";\nimport AddStorageButton from \"./components/AddStorageButton\";\n\n// 4 epochs\nconst NumBlocksNonArchival = 4 * 12 * 3600;\n\nconst IsMainnet = window.location.hostname === \"near.vodka\";\nconst TestNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  archivalNodeUrl: 'https://rpc.testnet.internal.near.org',\n  contractName: 'dev-1613368835598-7014445',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\n\nconst MainNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  archivalNodeUrl: 'https://rpc.testnet.internal.near.org',\n  contractName: 'dev-1613368835598-7014445',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\n\n// const MainNearConfig = {\n//   networkId: 'mainnet',\n//   nodeUrl: 'https://rpc.mainnet.near.org',\n//   contractName: 'berryclub.ek.near',\n//   walletUrl: 'https://wallet.near.org',\n// };\nconst NearConfig = IsMainnet ? MainNearConfig : TestNearConfig;\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._near = {\n      async blockViewCall(blockId, methodName, args) {\n        args = args || {};\n        this.account.validateArgs(args);\n        const connection = blockId + NumBlocksNonArchival < this.lastBlockHeight ?\n          this.archivalConnection :\n          this.account.connection;\n        const result = await connection.provider.query({\n          request_type: 'call_function',\n          block_id: blockId,\n          account_id: NearConfig.contractName,\n          method_name: methodName,\n          args_base64: new Buffer(JSON.stringify(args), 'utf8').toString('base64'),\n        });\n        return result.result && result.result.length > 0 && JSON.parse(Buffer.from(result.result).toString());\n      }\n    };\n\n    this.state = {\n      connected: false,\n      isNavCollapsed: true,\n      newPosts: [],\n      followers: {},\n      following: {},\n    };\n\n    this._initNear().then(() => {\n      this.setState({\n        signedIn: !!this._near.accountId,\n        signedAccountId: this._near.accountId,\n        connected: true,\n      });\n    });\n  }\n\n\n  async _initNear() {\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n    const near = await nearAPI.connect(Object.assign({deps: {keyStore}}, NearConfig));\n    this._near.archivalConnection = nearAPI.Connection.fromConfig({\n      networkId: NearConfig.networkId,\n      provider: { type: 'JsonRpcProvider', args: { url: NearConfig.archivalNodeUrl } },\n      signer: { type: 'InMemorySigner', keyStore }\n    });\n    this._near.keyStore = keyStore;\n    this._near.near = near;\n\n    this._near.walletConnection = new nearAPI.WalletConnection(near, NearConfig.contractName);\n    this._near.accountId = this._near.walletConnection.getAccountId();\n\n    this._near.account = this._near.walletConnection.account();\n    const block = await this._near.account.connection.provider.block({ finality: 'final' });\n    this._near.lastBlockHeight = block.header.height;\n    this._near.contract = new nearAPI.Contract(this._near.account, NearConfig.contractName, {\n      viewMethods: ['get_account', 'get_accounts', 'get_num_accounts', 'get_followers', 'get_following', 'get_post', 'storage_minimum_balance', 'storage_balance_of'],\n      changeMethods: ['storage_deposit', 'storage_withdraw', 'post', 'follow', 'unfollow'],\n    });\n    this._near.storageMinimumBalance = await this._near.contract.storage_minimum_balance();\n\n    this._near.accounts = {};\n    this._near.getAccount = (accountId) => {\n      if (accountId in this._near.accounts) {\n        return this._near.accounts[accountId];\n      }\n      return this._near.accounts[accountId] = Promise.resolve(AccountData.load(this._near, accountId));\n    };\n\n    this._near.cacheAccount = (accountId, account) => {\n      if (accountId in this._near.accounts) {\n        return;\n      }\n      this._near.accounts[accountId] = Promise.resolve(account);\n    };\n\n    this._near.posts = {};\n    this._near.getPost = (accountId, blockHeight) => {\n      const key = `${accountId}/${blockHeight}`;\n      if (key in this._near.posts) {\n        return this._near.posts[key];\n      }\n      return this._near.posts[key] = Promise.resolve(PostData.load(this._near, accountId, blockHeight));\n    };\n\n    if (this._near.accountId) {\n      this._near.accountData = await this._near.getAccount(this._near.accountId);\n      await this._near.accountData.fetchStorageBalance();\n      await this._near.accountData.fetchFollowings();\n      this.setState({\n        followings: Object.assign({}, this._near.accountData.followings),\n        enoughStorageBalance: this._near.accountData.stats.enoughStorageBalance,\n      });\n      this._near.accountData.fetchFollowers().then(() => {\n        this.setState({\n          followers: Object.assign({}, this._near.accountData.followers),\n        });\n      })\n    }\n  }\n\n\n  async requestSignIn(e) {\n    e.preventDefault();\n    const appTitle = 'NEAR Vodka';\n    await this._near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle\n    )\n    return false;\n  }\n\n  async logOut() {\n    this._near.walletConnection.signOut();\n    this._near.accountId = null;\n    this.setState({\n      signedIn: !!this._accountId,\n      signedAccountId: this._accountId,\n    })\n  }\n\n  render() {\n    const passProps = {\n      _near: this._near,\n      updateState: (s) => this.setState(s),\n      ...this.state\n    };\n    const header = !this.state.connected ? (\n      <div>Connecting... <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span></div>\n    ) : (this.state.signedIn ? (\n      <div>\n        <AddStorageButton {...passProps}/>\n        <button\n          className=\"btn btn-outline-secondary\"\n          onClick={() => this.logOut()}>Sign out ({this.state.signedAccountId})</button>\n      </div>\n    ) : (\n      <div>\n        <button\n          className=\"btn btn-primary\"\n          onClick={(e) => this.requestSignIn(e)}>Sign in with NEAR Wallet</button>\n      </div>\n    ));\n\n    return (\n      <div className=\"App\">\n        <Router basename={process.env.PUBLIC_URL}>\n          <nav className=\"navbar navbar-expand-lg navbar-light bg-light mb-3\">\n            <div className=\"container-fluid\">\n              <Link className=\"navbar-brand\" to=\"/\" title=\"NEAR Vodka - connecting people\">\n                <img src={NearVodkaLogo} alt=\"NEAR Vodka\" className=\"d-inline-block align-middle\" />\n                [TESTNET] NEAR Vodka\n              </Link>\n              <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                      aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span className=\"navbar-toggler-icon\"></span>\n              </button>\n              <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                  <li className=\"nav-item\">\n                    <Link className=\"nav-link\" aria-current=\"page\" to=\"/\">Home</Link>\n                  </li>\n                  {this.state.signedIn && (\n                    <li className=\"nav-item\">\n                      <Link className=\"nav-link\" aria-current=\"page\" to=\"/discover\">Discover</Link>\n                    </li>\n                  )}\n                  {this.state.signedIn && (\n                    <li className=\"nav-item\">\n                      <Link className=\"nav-link\" aria-current=\"page\"\n                            to={`/a/${this.state.signedAccountId}`}>Profile</Link>\n                    </li>\n                  )}\n                </ul>\n                <form className=\"d-flex\">\n                  {header}\n                </form>\n              </div>\n            </div>\n          </nav>\n\n          <a className=\"github-fork-ribbon right-bottom fixed\" href=\"https://github.com/evgenykuzyakov/near-vodka\" data-ribbon=\"Fork me on GitHub\"\n             title=\"Fork me on GitHub\">Fork me on GitHub</a>\n\n          <Switch>\n            <Route exact path={\"/\"}>\n              {this.state.signedIn ? (\n                <HomePage {...passProps}/>\n              ) : (\n                <DiscoverPage {...passProps}/>\n              )}\n            </Route>\n            <Route exact path={\"/discover\"}>\n              <DiscoverPage {...passProps}/>\n            </Route>\n            <Route exact path={\"/a/:accountId\"}>\n              <AccountPage {...passProps} />\n            </Route>\n            <Route path={\"/a/:accountId/:suffix\"}>\n              <AccountPage {...passProps} />\n            </Route>\n            <Route exact path={\"/p/:accountId/:blockHeight\"}>\n              <PostPage {...passProps} />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import \"./Home.scss\";\nimport React, {useEffect, useState} from 'react';\nimport NewPost from \"../components/NewPost\";\nimport Feed from \"../components/Feed\";\nimport Followers from \"../components/Followers\";\nimport {Link} from \"react-router-dom\";\n\nfunction HomePage(props) {\n  const [followingSeed, setFollowingSeed] = useState(false);\n\n  useEffect(() => {\n    if (props.connected) {\n      const accountData = props._near.accountData;\n      if (accountData) {\n        const seed = Object.entries(props.followings).map(\n          ([accountId, account]) => [account.stats.lastPostHeight, accountId]\n        );\n        if (accountData.stats.lastPostHeight > 0) {\n          seed.push([accountData.stats.lastPostHeight, accountData.accountId]);\n        }\n        setFollowingSeed(seed);\n      } else {\n        setFollowingSeed([]);\n      }\n    }\n  }, [props.connected, props.followings, props._near.accountData])\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row justify-content-md-center\">\n          <div className=\"col col-12 col-lg-8 col-xl-6\">\n            <NewPost {...props}/>\n            {(followingSeed && followingSeed.length > 0) ? (\n              <div>\n                <h3>Your Feed</h3>\n                <Feed {...props} seed={followingSeed} extraPosts={props.newPosts}/>\n              </div>\n            ) : followingSeed ? (\n              <div>\n                <h3>Feed is empty</h3>\n                <div>\n                  <Link to={\"/discover\"} className=\"btn btn-outline-secondary\">Discover more</Link>\n                </div>\n              </div>\n            ) :  (\n              <div className=\"d-flex justify-content-center\">\n                <div className=\"spinner-grow\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"col col-12 col-lg-4 col-xl-4\">\n            {props.signedIn && <Followers {...props} />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;\n","module.exports = __webpack_public_path__ + \"static/media/near_vodka_logo.f18e89c9.png\";","import React, {useState} from 'react';\nimport {useParams} from \"react-router\";\nimport Post from \"../components/Post\";\nimport Followers from \"../components/Followers\";\n\nfunction PostPage(props) {\n  const { accountId, blockHeight } = useParams();\n  const [post, setPost] = useState(false);\n\n  if (props.connected && props._near) {\n    props._near.getPost(accountId, parseInt(blockHeight)).then((post) => {\n      setPost(post);\n    })\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col col-12 col-lg-8 col-xl-6\">\n          {post ? (\n            <Post {...props} post={post} expanded={true}/>\n          ) : (\n            <div className=\"d-flex justify-content-center\">\n              <div className=\"spinner-grow\" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"col col-12 col-lg-4 col-xl-4\">\n          {props.signedIn && <Followers {...props} />}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PostPage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport './Post.scss';\nimport AccountCard from \"./AccountCard\";\n\nfunction Followers(props) {\n  const notFollowing = Object.keys(props.followers).filter((accountId) => !(accountId in props.followings));\n\n  const followers = notFollowing.map((accountId) => {\n    const key = `f/${accountId}`;\n    return (\n      <div key={key} className=\"follower\">\n        <div className=\"card mb-3\">\n          <div className=\"card-body\">\n            <AccountCard accountId={accountId} {...props}/>\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  return !props.connected ? (\n    <div className=\"d-flex justify-content-center\">\n      <div className=\"spinner-grow\" role=\"status\">\n        <span className=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n  ) : (followers.length > 0) ? (\n    <div>\n      <h3>Follow back</h3>\n      {followers}\n    </div>\n  ) : (\n    <div></div>\n  );\n}\n\nexport default Followers;\n","import React from 'react';\nimport './FollowButton.scss';\n\nfunction FollowButton(props) {\n  const accountId = props.accountId;\n  const account = props.account;\n\n  async function follow() {\n    if (!props.enoughStorageBalance) {\n      alert('Add storage balance to follow');\n      return;\n    }\n    if (!props.followings || (accountId in props.followings)) {\n      return;\n    }\n    props._near.accountData.followings[accountId] = account;\n    props.updateState({\n      followings: Object.assign({}, props._near.accountData.followings),\n    })\n    await props._near.contract.follow({account_id: accountId});\n  }\n\n  async function unfollow() {\n    if (!props.followings || !(accountId in props.followings)) {\n      return;\n    }\n    delete props._near.accountData.followings[accountId];\n    props.updateState({\n      followings: Object.assign({}, props._near.accountData.followings),\n    })\n    await props._near.contract.unfollow({account_id: accountId});\n  }\n\n  return (\n    <div className=\"follow-button mb-3\">\n      {(!account) ? (\n        <div className=\"spinner-grow\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      ) : (accountId === props.signedAccountId) ? (\n        <div>It's you</div>\n      ) : (props.followings && (accountId in props.followings)) ? (\n        <button className=\"btn btn-primary btn-unfollow\" onClick={unfollow}><span>Following</span></button>\n      ) : (props.signedIn) ? (\n        <button\n          className=\"btn btn-outline-primary btn-follow\"\n          onClick={follow}\n          >Follow</button>\n      ) : (\n        <button\n          className=\"btn btn-outline-secondary btn-follow\"\n          disabled={true}\n          >Sign in to Follow</button>\n      )}\n    </div>\n  );\n}\n\nexport default FollowButton;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport './Account.scss';\nimport {Link} from \"react-router-dom\";\nimport FollowButton from \"./FollowButton\";\nimport Account from \"./Account\";\nimport uuid from \"react-uuid\";\n\nfunction AccountCard(props) {\n  const [account, setAccount] = useState(null);\n  const [knownFollowers, setKnownFollowers] = useState([]);\n  const [newFollowing, setNewFollowing] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [followsYou, setFollowsYou] = useState(false);\n  const [key] = useState(uuid());\n\n  const hidden = props.hidden;\n  const accountId = props.accountId;\n\n  const fetchAccount = useCallback(async () => {\n    let account = await props._near.getAccount(accountId);\n    setAccount(account);\n    if (props.signedIn && props.signedAccountId !== accountId) {\n      setFollowsYou(accountId in props.followers);\n      account.fetchFollowers().then(() => {\n        setKnownFollowers(Object.keys(account.followers).filter((accountId) => (accountId in props.followings)));\n      });\n      account.fetchFollowings().then(() => {\n        setNewFollowing(Object.keys(account.followings).filter((accountId) => !(accountId in props.followings) && accountId !== props.signedAccountId));\n      });\n    }\n  }, [accountId, props._near, props.followings, props.signedIn, props.signedAccountId, props.followers])\n\n  useEffect(() => {\n    if (props.connected && !hidden && (!account || account.accountId !== accountId)) {\n      setLoading(true);\n      fetchAccount().then(() => setLoading(false))\n    }\n  }, [props.connected, accountId, hidden, account, fetchAccount]);\n\n  const followers = knownFollowers.slice(0, (knownFollowers.length === 4) ? 4 : 3).map(\n    (accountId, i) => (\n      <span key={`a-${key}-${accountId}`}>\n        {i > 0 && \", \"}\n        <Account {...props} accountId={accountId}/>\n      </span>\n    )\n  );\n\n  const followersAndOthers = knownFollowers.length - followers.length;\n\n  const following = newFollowing.slice(0, (newFollowing.length === 4) ? 4 : 3).map(\n    (accountId, i) => (\n      <span key={`b-${key}-${accountId}`}>\n        {i > 0 && \", \"}\n        <Account {...props} accountId={accountId}/>\n      </span>\n    )\n  );\n\n  const followingAndOthers = newFollowing.length - following.length;\n\n  return (\n    <div>\n      <div>\n        <h5><Link className=\"account-handle\" to={`/a/${accountId}`}>@{accountId}</Link></h5>\n      </div>\n      { loading ? (\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-grow\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      ) : account ? (\n        <div>\n          <FollowButton {...props} accountId={accountId} account={account}/>\n          <div className=\"mb-2\">\n            <div>\n              <span className=\"me-md-2\">\n                {account.stats.numPosts ? <b>{account.stats.numPosts}</b> : <span className=\"text-muted\">No</span>} <span className=\"text-muted\">post{account.stats.numPosts !== 1 && \"s\"}</span>\n              </span>\n              {followsYou && <span className=\"badge bg-secondary\">Follows You</span>}\n            </div>\n            <div>\n              <Link to={`/a/${accountId}/following`} className=\"following-followers\">\n                <span className=\"me-md-2\"><b>{account.stats.numFollowing}</b> <span className=\"text-muted\">following</span></span>\n              </Link>\n              <Link to={`/a/${accountId}/followers`} className=\"following-followers\">\n                <span><b>{account.stats.numFollowers}</b> <span className=\"text-muted\">followers</span></span>\n              </Link>\n            </div>\n          </div>\n          {props.signedIn && accountId !== props.signedAccountId && (\n            <div>\n              <div className=\"text-muted\">\n                { followers.length > 0 ? (\n                  <div>\n                    Followed by {followers} {followersAndOthers ? ` and ${followersAndOthers} others you follow` : \"\"}\n                  </div>\n                ) : (\n                  \"Not followed by anyone you know\"\n                )}\n              </div>\n              { following.length > 0 && (\n                <div className=\"text-muted\">\n                  Follows {following} {followingAndOthers ? ` and ${followingAndOthers} others you don't follow` : \"\"}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div>Error loading account</div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountCard;\n","import React, {useEffect, useRef, useState} from 'react';\nimport './Post.scss';\nimport Account from \"./Account\";\nimport TimeAgo from \"timeago-react\";\nimport {Link} from \"react-router-dom\";\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\n\nfunction Post(props) {\n  const container = useRef(null);\n  const [expand, setExpand] = useState(false);\n  const [overflow, setOverflow] = useState(false);\n  const post = props.post;\n\n  useEffect(() => {\n    if (container && container.current) {\n      const {scrollHeight, clientHeight} = container.current;\n      setOverflow(scrollHeight > clientHeight);\n    }\n  }, [expand, container, post.body])\n\n  const expanded = props.expanded || expand;\n\n  return (\n    <div className=\"card mb-3\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title\"><Account {...props} accountId={post.accountId} /></h5>\n        <h6 className=\"card-subtitle mb-2 text-muted\">\n          <Link className=\"post-link\" to={`/p/${post.accountId}/${post.blockHeight}`}><TimeAgo datetime={post.time} /></Link>\n        </h6>\n        <div>\n          <div className={`card-text post-body${!expanded ? ' post-body-truncated' : ''}${overflow ? ' post-body-overflow' : ''}`} ref={container}>\n            <ReactMarkdown plugins={[gfm]}>{post.body}</ReactMarkdown>\n          </div>\n          {expand ? (\n            <div className=\"mt-1\">\n              <button\n                className=\"btn btn-outline-secondary\"\n                onClick={() => setExpand(false)}\n              >Show less</button>\n            </div>\n          ) : overflow && (\n            <div className=\"mt-1\">\n              <button\n                className=\"btn btn-outline-secondary\"\n                onClick={() => setExpand(true)}\n              >Show more</button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Post;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport Post from \"./Post\";\nimport { SortedSet } from \"collections/sorted-set\";\nimport uuid from \"react-uuid\";\n\nfunction Feed(props) {\n  const [loading, setLoading] = useState(true);\n  const [posts, setPosts] = useState([]);\n  const [gkey] = useState(uuid())\n\n  const seed = props.seed;\n  const extraPosts = props.extraPosts || [];\n\n  const fetchPosts = useCallback(async (state) => {\n    const posts = [];\n    const recent = SortedSet(seed);\n    while (recent.length > 0 && posts.length < 30) {\n      const [blockHeight, accountId] = recent.pop();\n      if (blockHeight === 0) {\n        break;\n      }\n\n      const post = await props._near.getPost(accountId, blockHeight);\n      if (post) {\n        if (post.lastPostHeight > 0) {\n          recent.push([post.lastPostHeight, accountId])\n        }\n        posts.push(post);\n        if (state.mounted) {\n          setPosts([...posts]);\n        } else {\n          break;\n        }\n      }\n    }\n  }, [seed, props._near])\n\n  useEffect(() => {\n    let state = {\n      mounted: true\n    };\n    setLoading(true);\n    fetchPosts(state).then(() => {\n      if (state.mounted) {\n        setLoading(false)\n      }\n    })\n    return () => {\n      state.mounted = false;\n    }\n  }, [seed, fetchPosts]);\n\n  const feed = [...extraPosts, ...posts].map(post => {\n    const key = `${gkey}-${post.accountId}/${post.blockHeight}`;\n    return <Post {...props} key={key} post={post}/>;\n  });\n  return (\n    <div>\n      {(feed.length > 0) ? feed : !loading && (\n        <div className=\"text-muted\">\n          No posts.\n        </div>\n      )}\n      {loading && (\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-grow\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n","import React, {useState} from 'react';\nimport './Account.scss';\nimport ReactTooltip from \"react-tooltip\";\nimport {Link} from \"react-router-dom\";\nimport AccountCard from \"./AccountCard\";\nimport uuid from \"react-uuid\";\n\nfunction Account(props) {\n  const [hidden, setHidden] = useState(true);\n  const [key] = useState(uuid());\n  const accountId = props.accountId;\n\n  return (\n    <div className=\"account\">\n      <Link className=\"account-handle\" data-tip data-for={key} to={`/a/${accountId}`}>@{accountId}</Link>\n      <ReactTooltip\n        id={key}\n        type=\"light\"\n        border={true}\n        borderColor='rgb(222, 236, 230)'\n        className='account-tooltip'\n        delayHide={100}\n        delayShow={200}\n        effect='solid'\n        afterShow={() => setHidden(false)}\n        afterHide={() => setHidden(true)}\n      >\n        <AccountCard {...props} accountId={accountId} hidden={hidden} />\n\n      </ReactTooltip>\n    </div>\n  );\n}\n\nexport default Account;\n","import React, {useState} from 'react';\nimport {convertPost} from \"../data/Post\";\nimport AddStorageButton from \"./AddStorageButton\";\nimport Post from \"./Post\";\n\nfunction NewPost(props) {\n  const [ body, internalSetBody ] = useState(\"\");\n  const [ post, setPost ] = useState(null);\n  const [ loading, setLoading ] = useState(false);\n\n  function setBody(body) {\n    setPost(body ? {\n      accountId: props.signedAccountId,\n      blockHeight: 0,\n      time: new Date().getTime() * 1000000,\n      body,\n    } : null)\n\n    internalSetBody(body);\n  }\n\n  const postNow = async () => {\n    let _body = body;\n    setLoading(true);\n    setBody(\"\");\n    let newPosts = convertPost(await props._near.contract.post({body: _body}));\n    newPosts.accountId = props.signedAccountId;\n    props.updateState({\n      newPosts: [...props.newPosts, newPosts]\n    })\n    setLoading(false);\n  };\n\n  return props.enoughStorageBalance ? (\n    <div>\n      <form>\n        <div className=\"mb-3\">\n          <textarea\n            className=\"form-control\" placeholder={\"New post (supports markdown)\"} rows=\"5\" value={body}\n            onChange={(e) => setBody(e.target.value)}\n          />\n        </div>\n        <div className=\"mb-3 d-grid gap-2 d-md-flex justify-content-md-end\">\n          <button className=\"btn btn-primary\" disabled={!body} onClick={postNow}>\n            {loading ? (\n              <span>\n                <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                <span className=\"visually-hidden\">Loading...</span>\n                {' '}Posting\n              </span>\n            ) : (\n              <span>Post now</span>\n            )}\n          </button>\n        </div>\n        {post && (\n          <div className=\"mb-3\">\n            <h3 className=\"text-muted\">Preview</h3>\n            <Post {...props} post={post} />\n          </div>\n        )}\n      </form>\n    </div>\n  ) : (\n    <div className=\"mb-3\">\n      <div>\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <b>Not enough storage balance!</b><br/>\n          Add storage balance to be able to post and follow people.\n        </div>\n      </div>\n      <div>\n        <AddStorageButton {...props}/>\n      </div>\n    </div>\n  );\n}\n\nexport default NewPost;\n","const convertPost = (post) => {\n  return {\n    body: post.body,\n    time: new Date(parseFloat(post.time) / 1_000_000),\n    blockHeight: post.block_height,\n    lastPostHeight: post.last_post_height,\n  };\n};\n\nclass PostData {\n  constructor(_near, accountId, requestBlockHeight) {\n    this._near = _near;\n    this.accountId = accountId;\n    this.requestBlockHeight = requestBlockHeight;\n    this._ready = false;\n  }\n\n  static async load(_near, accountId, requestBlockHeight) {\n    let post = new PostData(_near, accountId, requestBlockHeight);\n    await post.fetch();\n    return post;\n  }\n\n\n  async fetch() {\n    const post = await this._near.blockViewCall(this.requestBlockHeight, 'get_post', {account_id: this.accountId});\n    if (post) {\n      Object.assign(this, convertPost(post));\n    }\n    this._ready = true;\n  }\n}\n\nexport {PostData, convertPost};\n","import React from 'react';\n\nfunction AddStorageButton(props) {\n  async function requestStorageBalance(e) {\n    e.preventDefault();\n    await props._near.contract.storage_deposit({}, \"30000000000000\", \"100000000000000000000000\");\n  }\n\n  return !props.enoughStorageBalance && (\n    <button\n      className=\"btn btn-primary me-md-2\"\n      onClick={requestStorageBalance}\n    >\n      Add storage balance\n    </button>\n  );\n}\n\nexport default AddStorageButton;\n","import BN from \"bn.js\";\n\nconst MinEnoughStorageBalance = new BN(\"50000000000000000000000\");\nconst FetchLimit = 100;\n\nconst convertAccountStats = (accountStats) => {\n  return {\n    numPosts: accountStats.num_posts,\n    numFollowers: accountStats.num_followers,\n    numFollowing: accountStats.num_following,\n    lastPostHeight: accountStats.last_post_height,\n  };\n};\n\nclass AccountData {\n  constructor(_near, accountId, accountStats) {\n    this._near = _near;\n    this.accountId = accountId;\n    this.stats = {\n      lastPostHeight: 0,\n      numFollowers: 0,\n      numFollowing: 0,\n      numPosts: 0,\n      enoughStorageBalance: false,\n    };\n    if (accountStats) {\n      Object.assign(this.stats, convertAccountStats(accountStats));\n      this._ready = true;\n    } else {\n      this._ready = false;\n    }\n    this.followings = false;\n    this.followers = false;\n    this._near.cacheAccount(accountId, this);\n  }\n\n  static async load(_near, accountId) {\n    let account = new AccountData(_near, accountId);\n    await account.fetchAccountStats();\n    return account;\n  }\n\n  async fetchStorageBalance() {\n    let storageBalance = await this._near.contract.storage_balance_of({account_id: this.accountId});\n    this.stats.storageTotal = new BN(storageBalance.total);\n    this.stats.storageAvailable = new BN(storageBalance.available);\n    this.stats.enoughStorageBalance = this.stats.storageAvailable > MinEnoughStorageBalance;\n  }\n\n  async fetchAccountStats() {\n    const accountStats = await this._near.contract.get_account({account_id: this.accountId});\n    if (accountStats) {\n      Object.assign(this.stats, convertAccountStats(accountStats));\n      this._ready = true;\n    }\n  }\n\n  async fetchFollowings() {\n    if (this.followings !== false) {\n      await this.followingsFetch;\n      return;\n    }\n    const promises = [];\n    for (let i = 0; i < this.stats.numFollowing; i += FetchLimit) {\n      promises.push(this._near.contract.get_following({\n        account_id: this.accountId,\n        from_index: i,\n        limit: FetchLimit,\n      }));\n    }\n    this.followings = {};\n    this.followingsFetch = new Promise(async (resolve) => {\n      (await Promise.all(promises)).flat().forEach(([accountId, accountStats]) => {\n        this.followings[accountId] = new AccountData(this._near, accountId, accountStats);\n      });\n      resolve();\n    });\n    await this.followingsFetch;\n  }\n\n  async fetchFollowers() {\n    if (this.followers !== false) {\n      await this.followersFetch;\n      return;\n    }\n    const promises = [];\n    for (let i = 0; i < this.stats.numFollowers; i += FetchLimit) {\n      promises.push(this._near.contract.get_followers({\n        account_id: this.accountId,\n        from_index: i,\n        limit: FetchLimit,\n      }));\n    }\n    this.followers = {};\n    this.followersFetch = new Promise(async (resolve) => {\n      (await Promise.all(promises)).flat().forEach(([accountId, accountStats]) => {\n        this.followers[accountId] = new AccountData(this._near, accountId, accountStats);\n      });\n      resolve();\n    });\n    await this.followersFetch;\n  }\n}\n\nexport {AccountData, convertAccountStats};\n","import \"./Home.scss\";\nimport React, {useCallback, useEffect, useState} from 'react';\nimport Feed from \"../components/Feed\";\nimport {AccountData} from \"../data/Account\";\nimport Followers from \"../components/Followers\";\n\nconst FetchLimit = 100;\n\nfunction DiscoverPage(props) {\n  const [seed, setSeed] = useState(false);\n\n  const fetchSeed = useCallback(async () => {\n    if (props.connected) {\n      const numAccounts = await props._near.contract.get_num_accounts();\n      return (await props._near.contract.get_accounts({\n        from_index: Math.max(numAccounts - FetchLimit, 0),\n        limit: FetchLimit\n      })).map(([accountId, accountStats]) => {\n        let account = new AccountData(props._near, accountId, accountStats);\n        return [account.stats.lastPostHeight, accountId]\n      });\n    } else {\n      return false;\n    }\n  }, [props.connected, props._near])\n\n  useEffect(() => {\n    fetchSeed().then(setSeed);\n  }, [fetchSeed]);\n\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row justify-content-md-center\">\n          <div className=\"col col-12 col-lg-8 col-xl-6\">\n            {seed && seed.length > 0 && (\n              <div>\n                <h3>Discover</h3>\n                <Feed {...props} seed={seed}/>\n              </div>\n            )}\n            {!seed && (\n              <div className=\"d-flex justify-content-center\">\n                <div className=\"spinner-grow\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"col col-12 col-lg-4 col-xl-4\">\n            {props.signedIn && <Followers {...props} />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DiscoverPage;\n"],"sourceRoot":""}